# Session 4: í´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí‚¹ ë° ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬

## ğŸ“ êµê³¼ê³¼ì •ì—ì„œì˜ ìœ„ì¹˜
ì´ ì„¸ì…˜ì€ **Week 2 > Day 3 > Session 4**ë¡œ, Kubernetes í•µì‹¬ ì˜¤ë¸Œì íŠ¸ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸ê³¼ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì„ ì‹¬í™” ë¶„ì„í•©ë‹ˆë‹¤.

## í•™ìŠµ ëª©í‘œ (5ë¶„)
- **Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸** ë° **CNI í”ŒëŸ¬ê·¸ì¸** ì•„í‚¤í…ì²˜ ì´í•´
- **ì„œë¹„ìŠ¤ íƒ€ì…ë³„ íŠ¹ì„±**ê³¼ **ë¡œë“œ ë°¸ëŸ°ì‹±** ë©”ì»¤ë‹ˆì¦˜ ë¶„ì„
- **Ingress ì»¨íŠ¸ë¡¤ëŸ¬**ì™€ **íŠ¸ë˜í”½ ë¼ìš°íŒ…** ì „ëµ ìˆ˜ë¦½

## 1. ì´ë¡ : Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸ (20ë¶„)

### ë„¤íŠ¸ì›Œí‚¹ ì•„í‚¤í…ì²˜ ê°œìš”

```mermaid
graph TB
    subgraph "Cluster Network Architecture"
        A[Pod Network] --> B[Service Network]
        B --> C[Node Network]
        
        subgraph "Pod-to-Pod Communication"
            D[Pod A] --> E[CNI Plugin]
            E --> F[Pod B]
        end
        
        subgraph "Service Discovery"
            G[DNS] --> H[Service]
            H --> I[Endpoints]
        end
        
        subgraph "External Access"
            J[Ingress] --> K[LoadBalancer]
            K --> L[NodePort]
        end
    end
    
    A --> D
    B --> G
    C --> J
```

### Kubernetes ë„¤íŠ¸ì›Œí‚¹ ê¸°ë³¸ ì›ì¹™

```
Kubernetes ë„¤íŠ¸ì›Œí‚¹ 4ëŒ€ ì›ì¹™:

1. Pod ê°„ ì§ì ‘ í†µì‹ :
â”œâ”€â”€ ëª¨ë“  PodëŠ” NAT ì—†ì´ ì„œë¡œ í†µì‹  ê°€ëŠ¥
â”œâ”€â”€ ë™ì¼í•œ ë…¸ë“œ ë˜ëŠ” ë‹¤ë¥¸ ë…¸ë“œ ìƒê´€ì—†ì´
â”œâ”€â”€ ê° PodëŠ” ê³ ìœ í•œ IP ì£¼ì†Œ ë³´ìœ 
â”œâ”€â”€ í”Œë« ë„¤íŠ¸ì›Œí¬ êµ¬ì¡° (Flat Network)
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„ë ˆì´ ë˜ëŠ” ì–¸ë”ë ˆì´
â””â”€â”€ ì»¨í…Œì´ë„ˆ ê°„ localhost í†µì‹  (ë™ì¼ Pod ë‚´)

2. ë…¸ë“œ-Pod í†µì‹ :
â”œâ”€â”€ ë…¸ë“œëŠ” NAT ì—†ì´ ëª¨ë“  Podì™€ í†µì‹ 
â”œâ”€â”€ PodëŠ” NAT ì—†ì´ ëª¨ë“  ë…¸ë“œì™€ í†µì‹ 
â”œâ”€â”€ ë…¸ë“œ ì—ì´ì „íŠ¸ (kubelet, kube-proxy) ì ‘ê·¼
â”œâ”€â”€ ì‹œìŠ¤í…œ ë°ëª¬ ë° ì„œë¹„ìŠ¤ í†µì‹ 
â”œâ”€â”€ í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê³µìœ  ì˜µì…˜
â””â”€â”€ ë³´ì•ˆ ì •ì±…ì„ í†µí•œ ì ‘ê·¼ ì œì–´

3. Pod ìì²´ IP ì¸ì‹:
â”œâ”€â”€ PodëŠ” ìì‹ ì˜ IP ì£¼ì†Œë¥¼ ì •í™•íˆ ì¸ì‹
â”œâ”€â”€ ë‹¤ë¥¸ Podê°€ ë³´ëŠ” IPì™€ ë™ì¼
â”œâ”€â”€ NATë‚˜ í”„ë¡ì‹œë¡œ ì¸í•œ IP ë³€í™˜ ì—†ìŒ
â”œâ”€â”€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ íˆ¬ëª…ì„±
â”œâ”€â”€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë‹¨ìˆœí™”
â””â”€â”€ ë¡œë“œ ë°¸ëŸ°ì‹± ë° í—¬ìŠ¤ ì²´í¬ ìš©ì´

4. ì„œë¹„ìŠ¤ ì¶”ìƒí™”:
â”œâ”€â”€ Pod IPëŠ” ì¼ì‹œì ì´ê³  ë™ì 
â”œâ”€â”€ Serviceë¥¼ í†µí•œ ì•ˆì •ì ì¸ ì—”ë“œí¬ì¸íŠ¸ ì œê³µ
â”œâ”€â”€ ë¡œë“œ ë°¸ëŸ°ì‹± ë° ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
â”œâ”€â”€ DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ í•´ì„
â”œâ”€â”€ ê°€ìƒ IP (VIP) ë° í¬íŠ¸ ë§¤í•‘
â””â”€â”€ ì™¸ë¶€ íŠ¸ë˜í”½ ë¼ìš°íŒ… ì§€ì›

ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬ì¡°:
â”œâ”€â”€ ê° PodëŠ” ë…ë¦½ì ì¸ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤, ë¼ìš°íŒ… í…Œì´ë¸”, iptables ê²©ë¦¬
â”œâ”€â”€ ë™ì¼ Pod ë‚´ ì»¨í…Œì´ë„ˆëŠ” ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê³µìœ 
â”œâ”€â”€ localhostë¥¼ í†µí•œ ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ 
â”œâ”€â”€ í¬íŠ¸ ê³µê°„ ê³µìœ  (í¬íŠ¸ ì¶©ëŒ ì£¼ì˜)
â””â”€â”€ ë³¼ë¥¨ì„ í†µí•œ Unix ì†Œì¼“ í†µì‹  ê°€ëŠ¥
```

### CNI (Container Network Interface) í”ŒëŸ¬ê·¸ì¸

```
CNI í”ŒëŸ¬ê·¸ì¸ ìƒíƒœê³„:

CNI í‘œì¤€ ë° ì•„í‚¤í…ì²˜:
â”œâ”€â”€ CNCF í‘œì¤€ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ê³¼ ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ ë¶„ë¦¬
â”œâ”€â”€ JSON ê¸°ë°˜ ì„¤ì • ë° ë°”ì´ë„ˆë¦¬ ì‹¤í–‰
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ìƒì„±, ì‚­ì œ, ìƒíƒœ í™•ì¸ API
â”œâ”€â”€ ì²´ì´ë‹ì„ í†µí•œ ë‹¤ì¤‘ í”ŒëŸ¬ê·¸ì¸ ì¡°í•©
â””â”€â”€ í¬ë¡œìŠ¤ í”Œë«í¼ í˜¸í™˜ì„±

ì£¼ìš” CNI í”ŒëŸ¬ê·¸ì¸:

Flannel:
â”œâ”€â”€ ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì¸ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬
â”œâ”€â”€ VXLAN, host-gw, UDP ë°±ì—”ë“œ ì§€ì›
â”œâ”€â”€ ì„¤ì • ë° ê´€ë¦¬ ìš©ì´ì„±
â”œâ”€â”€ ì†Œê·œëª¨ í´ëŸ¬ìŠ¤í„°ì— ì í•©
â”œâ”€â”€ ì œí•œì ì¸ ë„¤íŠ¸ì›Œí¬ ì •ì±… ì§€ì›
â””â”€â”€ ì„±ëŠ¥ë³´ë‹¤ ì•ˆì •ì„± ì¤‘ì‹œ

Calico:
â”œâ”€â”€ L3 ë¼ìš°íŒ… ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬
â”œâ”€â”€ BGP í”„ë¡œí† ì½œ í™œìš©
â”œâ”€â”€ ê³ ì„±ëŠ¥ ë° í™•ì¥ì„±
â”œâ”€â”€ í’ë¶€í•œ ë„¤íŠ¸ì›Œí¬ ì •ì±… ì§€ì›
â”œâ”€â”€ eBPF ë°ì´í„°í”Œë ˆì¸ ì˜µì…˜
â”œâ”€â”€ ë©€í‹° í´ë¼ìš°ë“œ ì§€ì›
â””â”€â”€ ì—”í„°í”„ë¼ì´ì¦ˆ ê¸°ëŠ¥ ì™„ë¹„

Weave Net:
â”œâ”€â”€ ë©”ì‹œ ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€
â”œâ”€â”€ ìë™ ë„¤íŠ¸ì›Œí¬ ë°œê²¬ ë° êµ¬ì„±
â”œâ”€â”€ ì•”í˜¸í™”ëœ í†µì‹  ì§€ì›
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ë¶„í•  ë³µêµ¬ ê¸°ëŠ¥
â”œâ”€â”€ ê°„ë‹¨í•œ ì„¤ì¹˜ ë° ê´€ë¦¬
â”œâ”€â”€ ì‹œê°ì  ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°ë§
â””â”€â”€ ì¤‘ì†Œê·œëª¨ í´ëŸ¬ìŠ¤í„° ìµœì í™”

Cilium:
â”œâ”€â”€ eBPF ê¸°ë°˜ ê³ ì„±ëŠ¥ ë„¤íŠ¸ì›Œí‚¹
â”œâ”€â”€ API ì¸ì‹ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
â”œâ”€â”€ L7 ë¡œë“œ ë°¸ëŸ°ì‹± ë° ì •ì±…
â”œâ”€â”€ ì„œë¹„ìŠ¤ ë©”ì‹œ í†µí•©
â”œâ”€â”€ ê´€ì°°ê°€ëŠ¥ì„± ë° ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° ë©”ì‹œ ì§€ì›
â””â”€â”€ ì°¨ì„¸ëŒ€ ë„¤íŠ¸ì›Œí‚¹ ê¸°ìˆ 

Amazon VPC CNI:
â”œâ”€â”€ AWS VPC ë„¤ì´í‹°ë¸Œ í†µí•©
â”œâ”€â”€ Podì— VPC IP ì§ì ‘ í• ë‹¹
â”œâ”€â”€ ë³´ì•ˆ ê·¸ë£¹ ë° NACLs í™œìš©
â”œâ”€â”€ ë†’ì€ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥
â”œâ”€â”€ AWS ì„œë¹„ìŠ¤ í†µí•© ìµœì í™”
â””â”€â”€ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì„¤ê³„

Azure CNI:
â”œâ”€â”€ Azure Virtual Network í†µí•©
â”œâ”€â”€ ë„¤ì´í‹°ë¸Œ Azure ë„¤íŠ¸ì›Œí‚¹
â”œâ”€â”€ Network Security Groups ì§€ì›
â”œâ”€â”€ Azure Load Balancer í†µí•©
â”œâ”€â”€ í•˜ì´ë¸Œë¦¬ë“œ í´ë¼ìš°ë“œ ì§€ì›
â””â”€â”€ Azure ì„œë¹„ìŠ¤ ìµœì í™”
```

## 2. ì´ë¡ : ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë° DNS (15ë¶„)

### Kubernetes DNS ì‹œìŠ¤í…œ

```mermaid
sequenceDiagram
    participant Pod as Pod
    participant DNS as CoreDNS
    participant API as API Server
    participant EP as Endpoints
    
    Pod->>DNS: Resolve service.namespace.svc.cluster.local
    DNS->>API: Watch Services/Endpoints
    API-->>DNS: Service/Endpoint updates
    DNS->>DNS: Update DNS records
    DNS-->>Pod: Return service IP
    
    Pod->>Pod: Connect to service IP
    Note over Pod: kube-proxy handles load balancing
```

### DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬

```
Kubernetes DNS êµ¬ì¡°:

CoreDNS ì•„í‚¤í…ì²˜:
â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° DNS ì„œë²„ ì—­í• 
â”œâ”€â”€ í”ŒëŸ¬ê·¸ì¸ ê¸°ë°˜ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
â”œâ”€â”€ Kubernetes API ê°ì‹œë¥¼ í†µí•œ ë™ì  ì—…ë°ì´íŠ¸
â”œâ”€â”€ ìºì‹±ì„ í†µí•œ ì„±ëŠ¥ ìµœì í™”
â”œâ”€â”€ ê³ ê°€ìš©ì„± ë°°í¬ ì§€ì›
â”œâ”€â”€ ë©”íŠ¸ë¦­ ë° ë¡œê¹… ì§€ì›
â””â”€â”€ ì‚¬ìš©ì ì •ì˜ DNS ì •ì±… ì ìš©

DNS ë ˆì½”ë“œ êµ¬ì¡°:
â”œâ”€â”€ ì„œë¹„ìŠ¤ DNS ì´ë¦„:
â”‚   â”œâ”€â”€ <service-name>.<namespace>.svc.cluster.local
â”‚   â”œâ”€â”€ <service-name>.<namespace>.svc
â”‚   â”œâ”€â”€ <service-name> (ë™ì¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´)
â”‚   â””â”€â”€ A ë ˆì½”ë“œ: ì„œë¹„ìŠ¤ ClusterIP ë°˜í™˜
â”œâ”€â”€ Pod DNS ì´ë¦„:
â”‚   â”œâ”€â”€ <pod-ip>.<namespace>.pod.cluster.local
â”‚   â”œâ”€â”€ ì (.)ì„ ëŒ€ì‹œ(-)ë¡œ ë³€í™˜ëœ IP
â”‚   â””â”€â”€ A ë ˆì½”ë“œ: Pod IP ë°˜í™˜
â”œâ”€â”€ Headless ì„œë¹„ìŠ¤:
â”‚   â”œâ”€â”€ ì„œë¹„ìŠ¤ ì´ë¦„ìœ¼ë¡œ ëª¨ë“  Pod IP ë°˜í™˜
â”‚   â”œâ”€â”€ SRV ë ˆì½”ë“œ: í¬íŠ¸ ì •ë³´ í¬í•¨
â”‚   â””â”€â”€ StatefulSet Pod ê°œë³„ DNS ì´ë¦„
â””â”€â”€ ì™¸ë¶€ ì„œë¹„ìŠ¤:
    â”œâ”€â”€ ExternalName ì„œë¹„ìŠ¤ CNAME ë ˆì½”ë“œ
    â”œâ”€â”€ ì™¸ë¶€ DNS ì´ë¦„ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
    â””â”€â”€ í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¶”ìƒí™”

DNS ì •ì±… ë° ì„¤ì •:
â”œâ”€â”€ Default: í´ëŸ¬ìŠ¤í„° DNS ì‚¬ìš©
â”œâ”€â”€ ClusterFirst: í´ëŸ¬ìŠ¤í„° DNS ìš°ì„ , ì—…ìŠ¤íŠ¸ë¦¼ í´ë°±
â”œâ”€â”€ ClusterFirstWithHostNet: í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬ Podìš©
â”œâ”€â”€ None: ì‚¬ìš©ì ì •ì˜ DNS ì„¤ì •
â”œâ”€â”€ dnsConfigë¥¼ í†µí•œ ì„¸ë°€í•œ ì œì–´
â””â”€â”€ ê²€ìƒ‰ ë„ë©”ì¸ ë° ì˜µì…˜ ì„¤ì •

ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ íŒ¨í„´:
â”œâ”€â”€ DNS ê¸°ë°˜ ë””ìŠ¤ì»¤ë²„ë¦¬ (ê¶Œì¥)
â”œâ”€â”€ í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ë””ìŠ¤ì»¤ë²„ë¦¬ (ë ˆê±°ì‹œ)
â”œâ”€â”€ API ì„œë²„ ì§ì ‘ ì¡°íšŒ
â”œâ”€â”€ ì„œë“œíŒŒí‹° ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë„êµ¬
â”œâ”€â”€ ì„œë¹„ìŠ¤ ë©”ì‹œ í†µí•©
â””â”€â”€ ì™¸ë¶€ ì„œë¹„ìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì—°ë™
```

### ë¡œë“œ ë°¸ëŸ°ì‹± ë©”ì»¤ë‹ˆì¦˜

```
kube-proxy ë¡œë“œ ë°¸ëŸ°ì‹±:

í”„ë¡ì‹œ ëª¨ë“œ:
â”œâ”€â”€ iptables ëª¨ë“œ (ê¸°ë³¸):
â”‚   â”œâ”€â”€ iptables ê·œì¹™ì„ í†µí•œ íŠ¸ë˜í”½ ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ ì»¤ë„ ê³µê°„ì—ì„œ ì²˜ë¦¬ (ê³ ì„±ëŠ¥)
â”‚   â”œâ”€â”€ ëœë¤ ë¡œë“œ ë°¸ëŸ°ì‹±
â”‚   â”œâ”€â”€ ì—°ê²° ì¶”ì  ê¸°ë°˜ ì„¸ì…˜ ì–´í”¼ë‹ˆí‹°
â”‚   â”œâ”€â”€ í™•ì¥ì„± ì œí•œ (ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤)
â”‚   â””â”€â”€ ë””ë²„ê¹… ë³µì¡ì„±
â”œâ”€â”€ IPVS ëª¨ë“œ:
â”‚   â”œâ”€â”€ Linux IPVS ì»¤ë„ ëª¨ë“ˆ í™œìš©
â”‚   â”œâ”€â”€ ë‹¤ì–‘í•œ ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜
â”‚   â”œâ”€â”€ ë†’ì€ ì„±ëŠ¥ ë° í™•ì¥ì„±
â”‚   â”œâ”€â”€ ì—°ê²° ê¸°ë°˜ ë¡œë“œ ë°¸ëŸ°ì‹±
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ ê°€ì¤‘ì¹˜ ì¡°ì •
â”‚   â””â”€â”€ ê³ ê¸‰ ìŠ¤ì¼€ì¤„ë§ ì˜µì…˜
â””â”€â”€ userspace ëª¨ë“œ (ë ˆê±°ì‹œ):
    â”œâ”€â”€ ì‚¬ìš©ì ê³µê°„ í”„ë¡ì‹œ
    â”œâ”€â”€ ë‚®ì€ ì„±ëŠ¥
    â”œâ”€â”€ í˜¸í™˜ì„± ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©
    â””â”€â”€ ë””ë²„ê¹… ìš©ì´ì„±

ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜ (IPVS):
â”œâ”€â”€ Round Robin (rr): ìˆœì°¨ì  ë¶„ë°°
â”œâ”€â”€ Least Connection (lc): ìµœì†Œ ì—°ê²° ìˆ˜
â”œâ”€â”€ Destination Hashing (dh): ëª©ì ì§€ í•´ì‹±
â”œâ”€â”€ Source Hashing (sh): ì†ŒìŠ¤ í•´ì‹±
â”œâ”€â”€ Shortest Expected Delay (sed): ì˜ˆìƒ ì§€ì—° ìµœì†Œ
â”œâ”€â”€ Never Queue (nq): íì‰ ë°©ì§€
â””â”€â”€ Weighted ë³€í˜•: ê°€ì¤‘ì¹˜ ì ìš© ë²„ì „

ì„¸ì…˜ ì–´í”¼ë‹ˆí‹°:
â”œâ”€â”€ ClientIP ê¸°ë°˜ ì„¸ì…˜ ìœ ì§€
â”œâ”€â”€ íƒ€ì„ì•„ì›ƒ ì„¤ì • ê°€ëŠ¥
â”œâ”€â”€ ìƒíƒœ ìœ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì§€ì›
â”œâ”€â”€ ë¡œë“œ ë°¸ëŸ°ì‹± íš¨ìœ¨ì„± íŠ¸ë ˆì´ë“œì˜¤í”„
â””â”€â”€ í´ë¼ì´ì–¸íŠ¸ IP ë³€ê²½ ì‹œ ì„¸ì…˜ ì†ì‹¤
```

## 3. ì´ë¡ : Ingress ë° íŠ¸ë˜í”½ ë¼ìš°íŒ… (10ë¶„)

### Ingress ì•„í‚¤í…ì²˜

```
Ingress ê°œë… ë° êµ¬ì¡°:

Ingress ë¦¬ì†ŒìŠ¤:
â”œâ”€â”€ L7 (HTTP/HTTPS) ë¡œë“œ ë°¸ëŸ°ì‹±
â”œâ”€â”€ í˜¸ìŠ¤íŠ¸ ê¸°ë°˜ ë¼ìš°íŒ…
â”œâ”€â”€ ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ…
â”œâ”€â”€ TLS í„°ë¯¸ë„¤ì´ì…˜
â”œâ”€â”€ ê°€ìƒ í˜¸ìŠ¤íŒ… ì§€ì›
â”œâ”€â”€ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì¶”ìƒí™”
â””â”€â”€ ì„ ì–¸ì  íŠ¸ë˜í”½ ë¼ìš°íŒ… ê·œì¹™

Ingress Controller:
â”œâ”€â”€ Ingress ë¦¬ì†ŒìŠ¤ êµ¬í˜„ì²´
â”œâ”€â”€ ì‹¤ì œ íŠ¸ë˜í”½ ë¼ìš°íŒ… ìˆ˜í–‰
â”œâ”€â”€ ë¡œë“œ ë°¸ëŸ°ì„œ ì„¤ì • ìë™í™”
â”œâ”€â”€ ë™ì  ì„¤ì • ì—…ë°ì´íŠ¸
â”œâ”€â”€ í—¬ìŠ¤ ì²´í¬ ë° ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ ë©”íŠ¸ë¦­ ë° ë¡œê¹… ì œê³µ
â””â”€â”€ ë‹¤ì–‘í•œ êµ¬í˜„ì²´ ì„ íƒ ê°€ëŠ¥

ì£¼ìš” Ingress Controller:

NGINX Ingress Controller:
â”œâ”€â”€ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
â”œâ”€â”€ ë†’ì€ ì„±ëŠ¥ ë° ì•ˆì •ì„±
â”œâ”€â”€ í’ë¶€í•œ ì–´ë…¸í…Œì´ì…˜ ì§€ì›
â”œâ”€â”€ ì»¤ìŠ¤í…€ ì„¤ì • ìœ ì—°ì„±
â”œâ”€â”€ ì»¤ë®¤ë‹ˆí‹° ë° ìƒìš© ë²„ì „
â”œâ”€â”€ ëª¨ë‹ˆí„°ë§ ë° ë©”íŠ¸ë¦£ ì§€ì›
â””â”€â”€ ë‹¤ì–‘í•œ ì¸ì¦ ë° ë³´ì•ˆ ê¸°ëŠ¥

Traefik:
â”œâ”€â”€ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì„¤ê³„
â”œâ”€â”€ ìë™ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
â”œâ”€â”€ ë™ì  ì„¤ì • ì—…ë°ì´íŠ¸
â”œâ”€â”€ ë‚´ì¥ ëŒ€ì‹œë³´ë“œ ë° ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ Let's Encrypt ìë™ ì¸ì¦ì„œ
â”œâ”€â”€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìµœì í™”
â””â”€â”€ ê°œë°œì ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤

HAProxy Ingress:
â”œâ”€â”€ ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ë¡œë“œ ë°¸ëŸ°ì„œ
â”œâ”€â”€ ê³ ì„±ëŠ¥ ë° ê³ ê°€ìš©ì„±
â”œâ”€â”€ ê³ ê¸‰ ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜
â”œâ”€â”€ ì„¸ë°€í•œ íŠ¸ë˜í”½ ì œì–´
â”œâ”€â”€ ì‹¤ì‹œê°„ í†µê³„ ë° ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ ë³´ì•ˆ ë° DDoS ë°©ì–´
â””â”€â”€ ë ˆê±°ì‹œ ì‹œìŠ¤í…œ í†µí•©

í´ë¼ìš°ë“œ ì œê³µì—…ì²´ Ingress:
â”œâ”€â”€ AWS ALB Ingress Controller
â”œâ”€â”€ Google Cloud Load Balancer
â”œâ”€â”€ Azure Application Gateway
â”œâ”€â”€ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í†µí•©
â”œâ”€â”€ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš©
â””â”€â”€ í´ë¼ìš°ë“œ íŠ¹í™” ê¸°ëŠ¥

Ingress ê³ ê¸‰ ê¸°ëŠ¥:
â”œâ”€â”€ ê²½ë¡œ ì¬ì‘ì„± (Path Rewriting)
â”œâ”€â”€ ë¦¬ë‹¤ì´ë ‰ì…˜ ë° ë¦¬ë¼ì´íŠ¸
â”œâ”€â”€ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬
â”œâ”€â”€ ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…
â”œâ”€â”€ CORS ì •ì±… ì ìš©
â”œâ”€â”€ ì••ì¶• ë° ìºì‹±
â”œâ”€â”€ ì›¹ì†Œì¼“ ì§€ì›
â””â”€â”€ gRPC í”„ë¡œí† ì½œ ì§€ì›
```

## 4. ê°œë… ì˜ˆì‹œ: ë„¤íŠ¸ì›Œí‚¹ êµ¬ì„± ë¶„ì„ (7ë¶„)

### CNI í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ì˜ˆì‹œ

```yaml
# Calico CNI ì„¤ì • (ê°œë… ì˜ˆì‹œ)
apiVersion: v1
kind: ConfigMap
metadata:
  name: calico-config
  namespace: kube-system
data:
  cni_network_config: |
    {
      "name": "k8s-pod-network",
      "cniVersion": "0.3.1",
      "plugins": [
        {
          "type": "calico",
          "log_level": "info",
          "datastore_type": "kubernetes",
          "mtu": 1440,
          "ipam": {
            "type": "calico-ipam"
          },
          "policy": {
            "type": "k8s"
          },
          "kubernetes": {
            "kubeconfig": "/etc/cni/net.d/calico-kubeconfig"
          }
        },
        {
          "type": "portmap",
          "snat": true,
          "capabilities": {"portMappings": true}
        }
      ]
    }
```

### ì„œë¹„ìŠ¤ ë° Ingress êµ¬ì„± ì˜ˆì‹œ

```yaml
# ë©€í‹° í‹°ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë„¤íŠ¸ì›Œí‚¹ (ê°œë… ì˜ˆì‹œ)
apiVersion: v1
kind: Service
metadata:
  name: frontend-service
spec:
  selector:
    app: frontend
  ports:
  - port: 80
    targetPort: 8080
  type: ClusterIP

---
apiVersion: v1
kind: Service
metadata:
  name: backend-service
spec:
  selector:
    app: backend
  ports:
  - port: 8080
    targetPort: 8080
  type: ClusterIP

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - app.example.com
    secretName: app-tls
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend-service
            port:
              number: 80
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: backend-service
            port:
              number: 8080
```

### ë„¤íŠ¸ì›Œí¬ ì •ì±… ì˜ˆì‹œ

```yaml
# ë„¤íŠ¸ì›Œí¬ ì •ì±… (ê°œë… ì˜ˆì‹œ)
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: backend-netpol
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - protocol: TCP
      port: 8080
  egress:
  - to:
    - podSelector:
        matchLabels:
          app: database
    ports:
    - protocol: TCP
      port: 5432
  - to: []
    ports:
    - protocol: TCP
      port: 53
    - protocol: UDP
      port: 53
```

### ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹… ì˜ˆì‹œ

```bash
# ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„± í…ŒìŠ¤íŠ¸ (ê°œë… ì˜ˆì‹œ)

# Pod ê°„ í†µì‹  í…ŒìŠ¤íŠ¸
kubectl exec -it pod1 -- ping pod2-ip

# ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ í…ŒìŠ¤íŠ¸
kubectl exec -it pod1 -- nslookup backend-service

# DNS í•´ì„ í™•ì¸
kubectl exec -it pod1 -- dig backend-service.default.svc.cluster.local

# ë„¤íŠ¸ì›Œí¬ ì •ì±… í™•ì¸
kubectl describe networkpolicy backend-netpol

# CNI í”ŒëŸ¬ê·¸ì¸ ìƒíƒœ í™•ì¸
kubectl get pods -n kube-system -l k8s-app=calico-node

# Ingress ìƒíƒœ ë° ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
kubectl describe ingress app-ingress
kubectl get endpoints frontend-service
```

## 5. í† ë¡  ë° ì •ë¦¬ (3ë¶„)

### í•µì‹¬ ê°œë… ì •ë¦¬
- **Kubernetes ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸**ì˜ 4ëŒ€ ì›ì¹™ê³¼ CNI í”ŒëŸ¬ê·¸ì¸ ì—­í• 
- **DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬**ì™€ kube-proxy ë¡œë“œ ë°¸ëŸ°ì‹±
- **Ingress ì»¨íŠ¸ë¡¤ëŸ¬**ë¥¼ í†µí•œ L7 íŠ¸ë˜í”½ ë¼ìš°íŒ… ë° ê´€ë¦¬
- **ë„¤íŠ¸ì›Œí¬ ì •ì±…**ì„ í†µí•œ ë§ˆì´í¬ë¡œì„¸ê·¸ë©˜í…Œì´ì…˜ êµ¬í˜„

### í† ë¡  ì£¼ì œ
"ëŒ€ê·œëª¨ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥, ë³´ì•ˆ, ê´€ë¦¬ íš¨ìœ¨ì„±ì„ ë™ì‹œì— ë§Œì¡±í•˜ëŠ” ìµœì ì˜ ë„¤íŠ¸ì›Œí‚¹ ì „ëµì€ ë¬´ì—‡ì¸ê°€?"

## ğŸ’¡ í•µì‹¬ í‚¤ì›Œë“œ
- **ë„¤íŠ¸ì›Œí‚¹ ëª¨ë¸**: CNI, Pod í†µì‹ , í”Œë« ë„¤íŠ¸ì›Œí¬
- **ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬**: DNS, CoreDNS, ë¡œë“œ ë°¸ëŸ°ì‹±
- **íŠ¸ë˜í”½ ë¼ìš°íŒ…**: Ingress, L7 ë¡œë“œ ë°¸ëŸ°ì‹±, TLS
- **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**: NetworkPolicy, ë§ˆì´í¬ë¡œì„¸ê·¸ë©˜í…Œì´ì…˜

## ğŸ“š ì°¸ê³  ìë£Œ
- [Kubernetes ë„¤íŠ¸ì›Œí‚¹ ê°œë…](https://kubernetes.io/docs/concepts/services-networking/)
- [CNI í”ŒëŸ¬ê·¸ì¸ ë¹„êµ](https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/)
- [Ingress ì»¨íŠ¸ë¡¤ëŸ¬](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/)
