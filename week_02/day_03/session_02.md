# Session 2: Kubernetes ì•„í‚¤í…ì²˜ ì‹¬í™” ë¶„ì„

## ğŸ“ êµê³¼ê³¼ì •ì—ì„œì˜ ìœ„ì¹˜
ì´ ì„¸ì…˜ì€ **Week 2 > Day 3 > Session 2**ë¡œ, ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ê°œë… ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Kubernetesì˜ ë‚´ë¶€ ì•„í‚¤í…ì²˜ì™€ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ì‹¬í™” ë¶„ì„í•©ë‹ˆë‹¤.

## í•™ìŠµ ëª©í‘œ (5ë¶„)
- **Kubernetes í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜** ë° **ì»´í¬ë„ŒíŠ¸ ì—­í• ** ì™„ì „ ì´í•´
- **ë§ˆìŠ¤í„° ë…¸ë“œì™€ ì›Œì»¤ ë…¸ë“œ** ê°„ì˜ **í†µì‹  ë©”ì»¤ë‹ˆì¦˜** ë¶„ì„
- **etcd í´ëŸ¬ìŠ¤í„°**ì™€ **ìƒíƒœ ê´€ë¦¬** ì‹œìŠ¤í…œ êµ¬ì¡° íŒŒì•…

## 1. ì´ë¡ : Kubernetes í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜ (20ë¶„)

### ì „ì²´ í´ëŸ¬ìŠ¤í„° êµ¬ì¡°

```mermaid
graph TB
    subgraph "Control Plane (Master Nodes)"
        A[API Server] --> B[etcd Cluster]
        A --> C[Scheduler]
        A --> D[Controller Manager]
        A --> E[Cloud Controller Manager]
    end
    
    subgraph "Worker Node 1"
        F[kubelet] --> G[kube-proxy]
        G --> H[Container Runtime]
        H --> I[Pods]
    end
    
    subgraph "Worker Node 2"
        J[kubelet] --> K[kube-proxy]
        K --> L[Container Runtime]
        L --> M[Pods]
    end
    
    subgraph "Add-ons"
        N[DNS] --> O[Dashboard]
        O --> P[Monitoring]
    end
    
    A --> F
    A --> J
    F --> N
```

### ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ë¶„ì„

```
Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ êµ¬ì„±:

API Server (kube-apiserver):
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ í´ëŸ¬ìŠ¤í„°ì˜ ì¤‘ì•™ ê´€ë¦¬ ì§€ì 
â”‚   â”œâ”€â”€ RESTful API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ
â”‚   â”œâ”€â”€ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ìš”ì²­ ê²€ì¦ ë° ìŠ¹ì¸ ì œì–´
â”‚   â”œâ”€â”€ etcdì™€ì˜ ìœ ì¼í•œ í†µì‹  ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ ê°ì‹œ(Watch) API ì œê³µ
â”‚   â””â”€â”€ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸ ë°œí–‰
â”œâ”€â”€ ì•„í‚¤í…ì²˜ íŠ¹ì§•:
â”‚   â”œâ”€â”€ ë¬´ìƒíƒœ(Stateless) ì„¤ê³„
â”‚   â”œâ”€â”€ ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥
â”‚   â”œâ”€â”€ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í†µí•œ ê³ ê°€ìš©ì„±
â”‚   â”œâ”€â”€ TLS ì•”í˜¸í™” í†µì‹ 
â”‚   â”œâ”€â”€ í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ ì§€ì›
â”‚   â””â”€â”€ OpenAPI ìŠ¤í™ ì¤€ìˆ˜
â””â”€â”€ ì£¼ìš” API ê·¸ë£¹:
    â”œâ”€â”€ Core API (v1): Pod, Service, ConfigMap
    â”œâ”€â”€ Apps API (apps/v1): Deployment, ReplicaSet
    â”œâ”€â”€ Networking API: NetworkPolicy, Ingress
    â”œâ”€â”€ Storage API: PersistentVolume, StorageClass
    â”œâ”€â”€ RBAC API: Role, RoleBinding, ClusterRole
    â””â”€â”€ Custom Resource Definitions (CRDs)

etcd í´ëŸ¬ìŠ¤í„°:
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ ë¶„ì‚° í‚¤-ê°’ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì •ë³´ ì €ì¥
â”‚   â”œâ”€â”€ ì„¤ì • ë°ì´í„° ë° ë©”íƒ€ë°ì´í„° ê´€ë¦¬
â”‚   â”œâ”€â”€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì§€ì›
â”‚   â”œâ”€â”€ ë¶„ì‚° ë½ ë©”ì»¤ë‹ˆì¦˜ ì œê³µ
â”‚   â”œâ”€â”€ ê°ì‹œ(Watch) ê¸°ëŠ¥ ì§€ì›
â”‚   â””â”€â”€ ìŠ¤ëƒ…ìƒ· ë° ë°±ì—… ê¸°ëŠ¥
â”œâ”€â”€ ì•„í‚¤í…ì²˜ íŠ¹ì§•:
â”‚   â”œâ”€â”€ Raft í•©ì˜ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
â”‚   â”œâ”€â”€ ê°•í•œ ì¼ê´€ì„± ë³´ì¥
â”‚   â”œâ”€â”€ í™€ìˆ˜ ê°œ ë…¸ë“œ êµ¬ì„± ê¶Œì¥ (3, 5, 7)
â”‚   â”œâ”€â”€ ë¦¬ë”-íŒ”ë¡œì›Œ êµ¬ì¡°
â”‚   â”œâ”€â”€ ìë™ ì¥ì•  ì¡°ì¹˜
â”‚   â””â”€â”€ TLS ìƒí˜¸ ì¸ì¦
â””â”€â”€ ì €ì¥ ë°ì´í„°:
    â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° êµ¬ì„± ì •ë³´
    â”œâ”€â”€ ë¦¬ì†ŒìŠ¤ ì˜¤ë¸Œì íŠ¸ ìƒíƒœ
    â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ì •ì±… ë° ì„¤ì •
    â”œâ”€â”€ ì‹œí¬ë¦¿ ë° ConfigMap
    â”œâ”€â”€ ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ ì •ë³´
    â””â”€â”€ ë…¸ë“œ ë° Pod ë©”íƒ€ë°ì´í„°

Scheduler (kube-scheduler):
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ Podë¥¼ ì ì ˆí•œ ë…¸ë“œì— ë°°ì¹˜
â”‚   â”œâ”€â”€ ë¦¬ì†ŒìŠ¤ ìš”êµ¬ì‚¬í•­ ë¶„ì„
â”‚   â”œâ”€â”€ ë…¸ë“œ ì„ íƒ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰
â”‚   â”œâ”€â”€ ì–´í”¼ë‹ˆí‹° ë° ì•ˆí‹°-ì–´í”¼ë‹ˆí‹° ì²˜ë¦¬
â”‚   â”œâ”€â”€ í…Œì¸íŠ¸ ë° í†¨ëŸ¬ë ˆì´ì…˜ ê³ ë ¤
â”‚   â”œâ”€â”€ ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§
â”‚   â””â”€â”€ ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬ ì§€ì›
â”œâ”€â”€ ìŠ¤ì¼€ì¤„ë§ í”„ë¡œì„¸ìŠ¤:
â”‚   â”œâ”€â”€ 1ë‹¨ê³„: í•„í„°ë§ (Predicates)
â”‚   â”œâ”€â”€ 2ë‹¨ê³„: ì ìˆ˜ ë§¤ê¸°ê¸° (Priorities)
â”‚   â”œâ”€â”€ 3ë‹¨ê³„: ìµœì  ë…¸ë“œ ì„ íƒ
â”‚   â”œâ”€â”€ 4ë‹¨ê³„: ë°”ì¸ë”© ìš”ì²­ ìƒì„±
â”‚   â””â”€â”€ 5ë‹¨ê³„: API ì„œë²„ì— ê²°ê³¼ ì „ì†¡
â””â”€â”€ ìŠ¤ì¼€ì¤„ë§ ì •ì±…:
    â”œâ”€â”€ ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§
    â”œâ”€â”€ ë…¸ë“œ ì–´í”¼ë‹ˆí‹° ìŠ¤ì¼€ì¤„ë§
    â”œâ”€â”€ Pod ì–´í”¼ë‹ˆí‹°/ì•ˆí‹°-ì–´í”¼ë‹ˆí‹°
    â”œâ”€â”€ í…Œì¸íŠ¸ ë° í†¨ëŸ¬ë ˆì´ì…˜
    â”œâ”€â”€ í† í´ë¡œì§€ ë¶„ì‚° ì œì•½
    â””â”€â”€ ìš°ì„ ìˆœìœ„ í´ë˜ìŠ¤ ê¸°ë°˜

Controller Manager (kube-controller-manager):
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ê°ì‹œ ë° ì¡°ì •
â”‚   â”œâ”€â”€ ì„ ì–¸ì  ìƒíƒœì™€ ì‹¤ì œ ìƒíƒœ ë™ê¸°í™”
â”‚   â”œâ”€â”€ ë‹¤ì–‘í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ ë° ê´€ë¦¬
â”‚   â”œâ”€â”€ ì´ë²¤íŠ¸ ê¸°ë°˜ ìƒíƒœ ë³€ê²½ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ìë™ ë³µêµ¬ ë° ìê°€ ì¹˜ìœ 
â”‚   â””â”€â”€ ë¦¬ì†ŒìŠ¤ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜
â”œâ”€â”€ ì£¼ìš” ì»¨íŠ¸ë¡¤ëŸ¬:
â”‚   â”œâ”€â”€ Deployment Controller: ë°°í¬ ê´€ë¦¬
â”‚   â”œâ”€â”€ ReplicaSet Controller: ë³µì œë³¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ Service Controller: ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ Node Controller: ë…¸ë“œ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ Namespace Controller: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ PersistentVolume Controller: ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬
â”‚   â””â”€â”€ Job Controller: ë°°ì¹˜ ì‘ì—… ê´€ë¦¬
â””â”€â”€ ì œì–´ ë£¨í”„ íŒ¨í„´:
    â”œâ”€â”€ í˜„ì¬ ìƒíƒœ ê´€ì°° (Observe)
    â”œâ”€â”€ ì›í•˜ëŠ” ìƒíƒœì™€ ë¹„êµ (Diff)
    â”œâ”€â”€ ì¡°ì • ì‘ì—… ìˆ˜í–‰ (Act)
    â””â”€â”€ ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ (Loop)
```

### ì›Œì»¤ ë…¸ë“œ ì»´í¬ë„ŒíŠ¸ ë¶„ì„

```
ì›Œì»¤ ë…¸ë“œ êµ¬ì„± ìš”ì†Œ:

kubelet:
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ ë…¸ë“œì˜ Kubernetes ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ Pod ìƒëª…ì£¼ê¸° ê´€ë¦¬
â”‚   â”œâ”€â”€ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ê³¼ í†µì‹ 
â”‚   â”œâ”€â”€ ë…¸ë“œ ìƒíƒœ ë³´ê³ 
â”‚   â”œâ”€â”€ ë³¼ë¥¨ ë§ˆìš´íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ í—¬ìŠ¤ ì²´í¬ ìˆ˜í–‰
â”‚   â””â”€â”€ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ ì£¼ìš” ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ Pod ìŠ¤í™ í•´ì„ ë° ì‹¤í–‰
â”‚   â”œâ”€â”€ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ í’€ë§
â”‚   â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ë° ìŠ¤í† ë¦¬ì§€ ì„¤ì •
â”‚   â”œâ”€â”€ ë¡œê·¸ ìˆ˜ì§‘ ë° ì „ë‹¬
â”‚   â”œâ”€â”€ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ë…¸ì¶œ
â”‚   â””â”€â”€ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ ì ìš©
â””â”€â”€ í†µì‹  ì¸í„°í˜ì´ìŠ¤:
    â”œâ”€â”€ API ì„œë²„ì™€ HTTPS í†µì‹ 
    â”œâ”€â”€ Container Runtime Interface (CRI)
    â”œâ”€â”€ Container Network Interface (CNI)
    â”œâ”€â”€ Container Storage Interface (CSI)
    â””â”€â”€ Device Plugin API

kube-proxy:
â”œâ”€â”€ ì—­í•  ë° ê¸°ëŠ¥:
â”‚   â”œâ”€â”€ ì„œë¹„ìŠ¤ ì¶”ìƒí™” êµ¬í˜„
â”‚   â”œâ”€â”€ ë¡œë“œ ë°¸ëŸ°ì‹± ë° íŠ¸ë˜í”½ ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ ê´€ë¦¬
â”‚   â”œâ”€â”€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì§€ì›
â”‚   â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ í†µì‹  ì²˜ë¦¬
â”‚   â””â”€â”€ ì™¸ë¶€ íŠ¸ë˜í”½ ë¼ìš°íŒ…
â”œâ”€â”€ í”„ë¡ì‹œ ëª¨ë“œ:
â”‚   â”œâ”€â”€ iptables ëª¨ë“œ (ê¸°ë³¸)
â”‚   â”œâ”€â”€ IPVS ëª¨ë“œ (ê³ ì„±ëŠ¥)
â”‚   â”œâ”€â”€ userspace ëª¨ë“œ (ë ˆê±°ì‹œ)
â”‚   â””â”€â”€ kernelspace ëª¨ë“œ (ì‹¤í—˜ì )
â””â”€â”€ ë„¤íŠ¸ì›Œí¬ ê¸°ëŠ¥:
    â”œâ”€â”€ ì„œë¹„ìŠ¤ IP ê°€ìƒí™”
    â”œâ”€â”€ ì—”ë“œí¬ì¸íŠ¸ ë¡œë“œ ë°¸ëŸ°ì‹±
    â”œâ”€â”€ ì„¸ì…˜ ì–´í”¼ë‹ˆí‹° ì§€ì›
    â”œâ”€â”€ ì™¸ë¶€ IP ë° NodePort ì²˜ë¦¬
    â””â”€â”€ ë„¤íŠ¸ì›Œí¬ ì •ì±… ì ìš©

Container Runtime:
â”œâ”€â”€ ì§€ì› ëŸ°íƒ€ì„:
â”‚   â”œâ”€â”€ containerd (ê¶Œì¥)
â”‚   â”œâ”€â”€ CRI-O
â”‚   â”œâ”€â”€ Docker Engine (deprecated)
â”‚   â””â”€â”€ ê¸°íƒ€ CRI í˜¸í™˜ ëŸ°íƒ€ì„
â”œâ”€â”€ CRI ì¸í„°í˜ì´ìŠ¤:
â”‚   â”œâ”€â”€ ì´ë¯¸ì§€ ê´€ë¦¬ API
â”‚   â”œâ”€â”€ ì»¨í…Œì´ë„ˆ ìƒëª…ì£¼ê¸° API
â”‚   â”œâ”€â”€ ìƒŒë“œë°•ìŠ¤ ê´€ë¦¬ API
â”‚   â””â”€â”€ ìŠ¤íŠ¸ë¦¬ë° API
â””â”€â”€ ëŸ°íƒ€ì„ ê¸°ëŠ¥:
    â”œâ”€â”€ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° ê´€ë¦¬
    â”œâ”€â”€ ì´ë¯¸ì§€ í’€ë§ ë° ìºì‹±
    â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
    â”œâ”€â”€ ìŠ¤í† ë¦¬ì§€ ë§ˆìš´íŠ¸ ì²˜ë¦¬
    â””â”€â”€ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ ì ìš©
```

## 2. ì´ë¡ : ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ (15ë¶„)

### API ì„œë²„ ì¤‘ì‹¬ í†µì‹  ì•„í‚¤í…ì²˜

```mermaid
sequenceDiagram
    participant kubectl as kubectl
    participant api as API Server
    participant etcd as etcd
    participant scheduler as Scheduler
    participant kubelet as kubelet
    participant runtime as Container Runtime
    
    kubectl->>api: Create Pod request
    api->>api: Authentication & Authorization
    api->>etcd: Store Pod spec
    etcd-->>api: Confirmation
    api-->>kubectl: Pod created
    
    scheduler->>api: Watch for unscheduled Pods
    api-->>scheduler: New Pod event
    scheduler->>scheduler: Select best node
    scheduler->>api: Bind Pod to node
    api->>etcd: Update Pod binding
    
    kubelet->>api: Watch for assigned Pods
    api-->>kubelet: Pod assignment
    kubelet->>runtime: Create container
    runtime-->>kubelet: Container started
    kubelet->>api: Update Pod status
    api->>etcd: Store Pod status
```

### í†µì‹  ë³´ì•ˆ ë° ì¸ì¦

```
Kubernetes ë³´ì•ˆ í†µì‹ :

TLS ì•”í˜¸í™”:
â”œâ”€â”€ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ê°„ TLS í†µì‹ 
â”œâ”€â”€ ìƒí˜¸ TLS ì¸ì¦ (mTLS)
â”œâ”€â”€ ì¸ì¦ì„œ ê¸°ë°˜ ì‹ ì› í™•ì¸
â”œâ”€â”€ ì¸ì¦ì„œ ìë™ ê°±ì‹ 
â”œâ”€â”€ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ ì •ì±…
â””â”€â”€ ë³´ì•ˆ ì±„ë„ ì„¤ì •

ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜:
â”œâ”€â”€ X.509 í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ
â”œâ”€â”€ ì„œë¹„ìŠ¤ ì–´ì¹´ìš´íŠ¸ í† í°
â”œâ”€â”€ OpenID Connect (OIDC)
â”œâ”€â”€ ì›¹í›… í† í° ì¸ì¦
â”œâ”€â”€ í”„ë¡ì‹œ ì¸ì¦
â””â”€â”€ ìµëª… ìš”ì²­ ì²˜ë¦¬

ê¶Œí•œ ë¶€ì—¬ (Authorization):
â”œâ”€â”€ RBAC (Role-Based Access Control)
â”œâ”€â”€ ABAC (Attribute-Based Access Control)
â”œâ”€â”€ ì›¹í›… ê¶Œí•œ ë¶€ì—¬
â”œâ”€â”€ ë…¸ë“œ ê¶Œí•œ ë¶€ì—¬
â””â”€â”€ í•­ìƒ í—ˆìš©/ê±°ë¶€ ëª¨ë“œ

ìŠ¹ì¸ ì œì–´ (Admission Control):
â”œâ”€â”€ ë³€í˜• ìŠ¹ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ (Mutating)
â”œâ”€â”€ ê²€ì¦ ìŠ¹ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ (Validating)
â”œâ”€â”€ ë™ì  ìŠ¹ì¸ ì œì–´ (Webhooks)
â”œâ”€â”€ ì •ì±… ê¸°ë°˜ ìŠ¹ì¸ ì œì–´
â””â”€â”€ ë¦¬ì†ŒìŠ¤ ì¿¼í„° ì ìš©
```

## 3. ì´ë¡ : etcd í´ëŸ¬ìŠ¤í„°ì™€ ìƒíƒœ ê´€ë¦¬ (10ë¶„)

### etcd ì•„í‚¤í…ì²˜ ë° ë°ì´í„° ëª¨ë¸

```
etcd í´ëŸ¬ìŠ¤í„° êµ¬ì„±:

Raft í•©ì˜ ì•Œê³ ë¦¬ì¦˜:
â”œâ”€â”€ ë¦¬ë” ì„ ì¶œ ë©”ì»¤ë‹ˆì¦˜
â”œâ”€â”€ ë¡œê·¸ ë³µì œ í”„ë¡œí† ì½œ
â”œâ”€â”€ ì•ˆì „ì„± ë³´ì¥ (Safety)
â”œâ”€â”€ í™œì„±ë„ ë³´ì¥ (Liveness)
â”œâ”€â”€ ë¶„í•  ë‚´ì„± (Partition Tolerance)
â””â”€â”€ ê°•í•œ ì¼ê´€ì„± (Strong Consistency)

í´ëŸ¬ìŠ¤í„° í† í´ë¡œì§€:
â”œâ”€â”€ í™€ìˆ˜ ê°œ ë…¸ë“œ êµ¬ì„± (3, 5, 7)
â”œâ”€â”€ ì¿¼ëŸ¼ ê¸°ë°˜ ì˜ì‚¬ê²°ì •
â”œâ”€â”€ ë¦¬ë”-íŒ”ë¡œì›Œ ì—­í•  ë¶„ë‹´
â”œâ”€â”€ ìë™ ì¥ì•  ì¡°ì¹˜
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ë¶„í•  ì²˜ë¦¬
â””â”€â”€ ë…¸ë“œ ì¶”ê°€/ì œê±° ë™ì  ì²˜ë¦¬

ë°ì´í„° ì €ì¥ êµ¬ì¡°:
â”œâ”€â”€ í‚¤-ê°’ ì €ì¥ ëª¨ë¸
â”œâ”€â”€ ê³„ì¸µì  í‚¤ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
â”œâ”€â”€ ë²„ì „ ê´€ë¦¬ ë° íˆìŠ¤í† ë¦¬
â”œâ”€â”€ TTL (Time To Live) ì§€ì›
â”œâ”€â”€ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
â””â”€â”€ ì••ì¶• ë° ìµœì í™”

ë°±ì—… ë° ë³µêµ¬:
â”œâ”€â”€ ìŠ¤ëƒ…ìƒ· ê¸°ë°˜ ë°±ì—…
â”œâ”€â”€ ì¦ë¶„ ë°±ì—… ì§€ì›
â”œâ”€â”€ í¬ì¸íŠ¸-ì¸-íƒ€ì„ ë³µêµ¬
â”œâ”€â”€ í´ëŸ¬ìŠ¤í„° ê°„ ë³µì œ
â”œâ”€â”€ ì¬í•´ ë³µêµ¬ ì ˆì°¨
â””â”€â”€ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦
```

### Kubernetes ìƒíƒœ ê´€ë¦¬

```
í´ëŸ¬ìŠ¤í„° ìƒíƒœ ê´€ë¦¬:

ë¦¬ì†ŒìŠ¤ ìƒíƒœ ì¶”ì :
â”œâ”€â”€ ì„ ì–¸ì  ìƒíƒœ (Desired State)
â”œâ”€â”€ í˜„ì¬ ìƒíƒœ (Current State)
â”œâ”€â”€ ê´€ì°°ëœ ìƒíƒœ (Observed State)
â”œâ”€â”€ ìƒíƒœ ì „ì´ ì¶”ì 
â”œâ”€â”€ ì´ë²¤íŠ¸ ê¸°ë°˜ ì—…ë°ì´íŠ¸
â””â”€â”€ ìµœì¢… ì¼ê´€ì„± ë³´ì¥

Watch ë©”ì»¤ë‹ˆì¦˜:
â”œâ”€â”€ ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½ ê°ì§€
â”œâ”€â”€ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
â”œâ”€â”€ íš¨ìœ¨ì ì¸ í´ë§ ëŒ€ì²´
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ìµœì í™”
â”œâ”€â”€ í´ë¼ì´ì–¸íŠ¸ ìºì‹± ì§€ì›
â””â”€â”€ ì¬ì—°ê²° ë° ì¬ë™ê¸°í™”

ë¦¬ì†ŒìŠ¤ ë²„ì „ ê´€ë¦¬:
â”œâ”€â”€ ë‚™ê´€ì  ë™ì‹œì„± ì œì–´
â”œâ”€â”€ ì¶©ëŒ ê°ì§€ ë° í•´ê²°
â”œâ”€â”€ ë²„ì „ ê¸°ë°˜ ì—…ë°ì´íŠ¸
â”œâ”€â”€ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸ ì§€ì›
â”œâ”€â”€ ì›ìì  ì—°ì‚° ë³´ì¥
â””â”€â”€ ë°ì´í„° ê²½í•© ë°©ì§€
```

## 4. ê°œë… ì˜ˆì‹œ: ì•„í‚¤í…ì²˜ êµ¬ì„± ë¶„ì„ (7ë¶„)

### í´ëŸ¬ìŠ¤í„° êµ¬ì„± ì˜ˆì‹œ

```yaml
# ê³ ê°€ìš©ì„± í´ëŸ¬ìŠ¤í„° êµ¬ì„± (ê°œë… ì˜ˆì‹œ)
apiVersion: kubeadm.k8s.io/v1beta3
kind: ClusterConfiguration
metadata:
  name: ha-cluster
kubernetesVersion: v1.28.0
controlPlaneEndpoint: "k8s-api.example.com:6443"
etcd:
  external:
    endpoints:
    - https://etcd1.example.com:2379
    - https://etcd2.example.com:2379
    - https://etcd3.example.com:2379
    caFile: /etc/kubernetes/pki/etcd/ca.crt
    certFile: /etc/kubernetes/pki/apiserver-etcd-client.crt
    keyFile: /etc/kubernetes/pki/apiserver-etcd-client.key
networking:
  serviceSubnet: "10.96.0.0/12"
  podSubnet: "10.244.0.0/16"
apiServer:
  extraArgs:
    audit-log-maxage: "30"
    audit-log-maxbackup: "3"
    audit-log-maxsize: "100"
    audit-log-path: /var/log/audit.log
  certSANs:
  - "k8s-api.example.com"
  - "10.0.0.100"
controllerManager:
  extraArgs:
    bind-address: "0.0.0.0"
scheduler:
  extraArgs:
    bind-address: "0.0.0.0"
```

### ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸ ì˜ˆì‹œ

```bash
# í´ëŸ¬ìŠ¤í„° ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸ (ê°œë… ì˜ˆì‹œ)

# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes -o wide

# ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ
kubectl get pods -n kube-system

# etcd í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
kubectl exec -n kube-system etcd-master1 -- etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key \
  endpoint health

# API ì„œë²„ ìƒíƒœ í™•ì¸
kubectl get --raw='/healthz'

# ìŠ¤ì¼€ì¤„ëŸ¬ ë¦¬ë” í™•ì¸
kubectl get endpoints kube-scheduler -n kube-system -o yaml
```

### í†µì‹  íë¦„ ì¶”ì  ì˜ˆì‹œ

```bash
# API ìš”ì²­ ì¶”ì  (ê°œë… ì˜ˆì‹œ)

# API ì„œë²„ ê°ì‚¬ ë¡œê·¸ í™•ì¸
tail -f /var/log/audit.log | grep "Pod"

# kubelet ë¡œê·¸ í™•ì¸
journalctl -u kubelet -f

# ë„¤íŠ¸ì›Œí¬ í†µì‹  í™•ì¸
tcpdump -i any port 6443 -n

# etcd í†µì‹  ëª¨ë‹ˆí„°ë§
etcdctl watch --prefix /registry/pods/
```

## 5. í† ë¡  ë° ì •ë¦¬ (3ë¶„)

### í•µì‹¬ ê°œë… ì •ë¦¬
- **Kubernetes ì•„í‚¤í…ì²˜**ëŠ” ë§ˆìŠ¤í„°-ì›Œì»¤ ë…¸ë“œ êµ¬ì¡°ë¡œ ì„¤ê³„
- **API ì„œë²„**ê°€ ëª¨ë“  í†µì‹ ì˜ ì¤‘ì‹¬ ì—­í•  ìˆ˜í–‰
- **etcd**ë¥¼ í†µí•œ ë¶„ì‚° ìƒíƒœ ê´€ë¦¬ì™€ ê°•í•œ ì¼ê´€ì„± ë³´ì¥
- **ì»´í¬ë„ŒíŠ¸ ê°„ ë³´ì•ˆ í†µì‹ **ê³¼ ì¸ì¦/ê¶Œí•œ ë¶€ì—¬ ì²´ê³„

### í† ë¡  ì£¼ì œ
"Kubernetes ì•„í‚¤í…ì²˜ì˜ ê° ì»´í¬ë„ŒíŠ¸ê°€ ê³ ê°€ìš©ì„±ê³¼ í™•ì¥ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì–´ë–»ê²Œ ì„¤ê³„ë˜ì—ˆëŠ”ê°€?"

## ğŸ’¡ í•µì‹¬ í‚¤ì›Œë“œ
- **ì•„í‚¤í…ì²˜**: ì»¨íŠ¸ë¡¤ í”Œë ˆì¸, ì›Œì»¤ ë…¸ë“œ, ë¶„ì‚° ì‹œìŠ¤í…œ
- **í•µì‹¬ ì»´í¬ë„ŒíŠ¸**: API ì„œë²„, etcd, ìŠ¤ì¼€ì¤„ëŸ¬, kubelet
- **í†µì‹  ë©”ì»¤ë‹ˆì¦˜**: TLS, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬, Watch API
- **ìƒíƒœ ê´€ë¦¬**: Raft í•©ì˜, ì„ ì–¸ì  ìƒíƒœ, ìµœì¢… ì¼ê´€ì„±

## ğŸ“š ì°¸ê³  ìë£Œ
- [Kubernetes ì•„í‚¤í…ì²˜](https://kubernetes.io/docs/concepts/architecture/)
- [etcd ë¬¸ì„œ](https://etcd.io/docs/)
- [Kubernetes API ê°œë…](https://kubernetes.io/docs/concepts/overview/kubernetes-api/)
