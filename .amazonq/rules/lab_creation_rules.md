# Lab ì‘ì„± ê·œì¹™ (Lab Creation Rules)

## ğŸ“‹ Lab êµ¬ì¡° í‘œì¤€

### ğŸ¯ AWS Asset Icons ì‚¬ìš© (Week 5 ì „ìš©)
**ì°¸ì¡°**: [AWS Asset Icons ì‚¬ìš© ê·œì¹™](./aws_asset_icons_usage.md)

Lab ë¬¸ì„œì—ì„œ AWS ì„œë¹„ìŠ¤ í‘œì‹œ ì‹œ ë°˜ë“œì‹œ ê³µì‹ ì•„ì´ì½˜ ì‚¬ìš©:
```markdown
**ì‚¬ìš©ëœ AWS ì„œë¹„ìŠ¤**:
- ![EC2](../../../Asset-Package.../Arch_Compute/64/Arch_Amazon-EC2_64.svg) **EC2**
- ![RDS](../../../Asset-Package.../Arch_Database/64/Arch_Amazon-RDS_64.svg) **RDS**
```

### í•„ìˆ˜ êµ¬ì„± ìš”ì†Œ (ìˆœì„œëŒ€ë¡œ)

1. **ì „ì²´ ì•„í‚¤í…ì²˜ ì„¤ëª…**
   - Mermaid ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‹œê°í™”
   - ê° ì»´í¬ë„ŒíŠ¸ ê°„ ê´€ê³„ ëª…í™•íˆ í‘œì‹œ
   - ìƒ‰ìƒ ì½”ë”©ìœ¼ë¡œ ê³„ì¸µ êµ¬ë¶„

2. **ì—­í• ë³„ ìƒì„¸ ì„¤ëª…**
   - ê° ì„œë¹„ìŠ¤/ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• 
   - ë³´ì•ˆ ê³„ì¸µë³„ ì±…ì„
   - í†µì‹  ë°©ì‹ (mTLS, JWT ë“±)

3. **íŠ¸ë˜í”½ íë¦„ ì˜ˆì‹œ**
   - Sequence Diagramìœ¼ë¡œ ì‹¤ì œ ìš”ì²­ íë¦„
   - ë‹¨ê³„ë³„ ì¸ì¦/ì¸ê°€ ê³¼ì •
   - ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜

4. **Step 1: í™˜ê²½ ì´ˆê¸°í™”**
   - ê¸°ì¡´ lab-cluster ì‚­ì œ
   - ìƒˆë¡œìš´ lab-cluster ìƒì„±
   - í´ëŸ¬ìŠ¤í„° ìŠ¤í™:
     * Control Plane: 1ê°œ
     * Worker Node: 2ê°œ
     * ì˜¤í”ˆ í¬íŠ¸: 30080-30082, 443, 80

5. **ê° Stepë³„ êµ¬í˜„**
   - Step 2, 3, 4... ìˆœì°¨ì  ì§„í–‰
   - ê° Stepë§ˆë‹¤ ìŠ¤í¬ë¦½íŠ¸ ì œê³µ
   - ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜: `lab_scripts/lab1/`

6. **ì‹¤ìŠµ ì²´í¬í¬ì¸íŠ¸**
   - ê° ë‹¨ê³„ë³„ ê²€ì¦ í•­ëª©
   - ì²´í¬ë¦¬ìŠ¤íŠ¸ í˜•íƒœ

7. **íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ**
   - ì˜ˆìƒ ë¬¸ì œ ìƒí™©
   - ì§„ë‹¨ ë°©ë²•
   - í•´ê²° ë°©ë²•

8. **ì‹¤ìŠµ ì •ë¦¬**
   - cleanup.sh ìŠ¤í¬ë¦½íŠ¸ ì œê³µ
   - ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì‚­ì œ

9. **ì‹¤ìŠµ íšŒê³ **
   - í•™ìŠµ ì„±ê³¼ ì •ë¦¬
   - ë‹¤ìŒ Lab ì—°ê³„

---

## ğŸ”§ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ê·œì¹™

### ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜
```
theory/week_XX/dayX/lab_scripts/
â”œâ”€â”€ lab1/
â”‚   â”œâ”€â”€ step1-setup-cluster.sh
â”‚   â”œâ”€â”€ step2-install-istio.sh
â”‚   â”œâ”€â”€ step3-deploy-services.sh
â”‚   â”œâ”€â”€ step4-configure-security.sh
â”‚   â”œâ”€â”€ test-system.sh
â”‚   â””â”€â”€ cleanup.sh
```

### ìŠ¤í¬ë¦½íŠ¸ í—¤ë” í‘œì¤€
```bash
#!/bin/bash

# Week X Day X Lab X: [ìŠ¤í¬ë¦½íŠ¸ ëª©ì ]
# ì„¤ëª…: [ìƒì„¸ ì„¤ëª…]
# ì‚¬ìš©ë²•: ./script-name.sh

set -e  # ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¢…ë£Œ

echo "=== [ì‘ì—…ëª…] ì‹œì‘ ==="
```

### ìŠ¤í¬ë¦½íŠ¸ ë³¸ë¬¸ êµ¬ì¡°
```bash
# 1. í™˜ê²½ í™•ì¸
echo "1/5 í™˜ê²½ í™•ì¸ ì¤‘..."
# ... ì½”ë“œ ...

# 2. ë¦¬ì†ŒìŠ¤ ìƒì„±
echo "2/5 ë¦¬ì†ŒìŠ¤ ìƒì„± ì¤‘..."
# ... ì½”ë“œ ...

# 3. ì„¤ì • ì ìš©
echo "3/5 ì„¤ì • ì ìš© ì¤‘..."
# ... ì½”ë“œ ...

# 4. ê²€ì¦
echo "4/5 ê²€ì¦ ì¤‘..."
# ... ì½”ë“œ ...

# 5. ê²°ê³¼ ì¶œë ¥
echo "5/5 ì™„ë£Œ"
echo ""
echo "=== [ì‘ì—…ëª…] ì™„ë£Œ ==="
echo ""
echo "ë°°í¬ëœ ë¦¬ì†ŒìŠ¤:"
echo "- ë¦¬ì†ŒìŠ¤ 1: ì„¤ëª…"
echo "- ë¦¬ì†ŒìŠ¤ 2: ì„¤ëª…"
```

### ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ ì²˜ë¦¬
```bash
# ì„±ê³µ ì‹œ
echo "âœ… ëª¨ë“  ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
exit 0

# ì‹¤íŒ¨ ì‹œ
echo "âŒ ì‘ì—… ì‹¤íŒ¨: [ì˜¤ë¥˜ ë©”ì‹œì§€]"
exit 1
```

---

## ğŸ“ Lab ë¬¸ì„œ ì‘ì„± í…œí”Œë¦¿

### Step êµ¬ì¡°
```markdown
## ğŸ› ï¸ Step X: [ë‹¨ê³„ëª…] (ì˜ˆìƒ ì‹œê°„)

### ëª©í‘œ
- [ì´ ë‹¨ê³„ì—ì„œ ë‹¬ì„±í•  ëª©í‘œ]

### ğŸš€ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
```bash
cd theory/week_XX/dayX/lab_scripts/lab1
./stepX-script-name.sh
```

**ğŸ“‹ ìŠ¤í¬ë¦½íŠ¸ ë‚´ìš©**: [stepX-script-name.sh](./lab_scripts/lab1/stepX-script-name.sh)

**ìŠ¤í¬ë¦½íŠ¸ í•µì‹¬ ë¶€ë¶„**:
```bash
# í•µì‹¬ ì½”ë“œë§Œ í‘œì‹œ (5-10ì¤„)
kubectl apply -f resource.yaml
# ... ì¤‘ëµ ...
```

### ğŸ“Š ì˜ˆìƒ ê²°ê³¼
```
ì˜ˆìƒ ì¶œë ¥ ê²°ê³¼ í‘œì‹œ
```

### âœ… ê²€ì¦
```bash
# ê²€ì¦ ëª…ë ¹ì–´
kubectl get pods -n namespace
```

**ì˜ˆìƒ ì¶œë ¥**:
```
NAME                     READY   STATUS    RESTARTS   AGE
pod-name                 2/2     Running   0          30s
```
```

---

## ğŸ¯ í´ëŸ¬ìŠ¤í„° ì„¤ì • í‘œì¤€

### Kind í´ëŸ¬ìŠ¤í„° ì„¤ì • (Step 1)
```yaml
# kind-config.yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: lab-cluster
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 30080
    hostPort: 30080
    protocol: TCP
  - containerPort: 30081
    hostPort: 30081
    protocol: TCP
  - containerPort: 30082
    hostPort: 30082
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
  - containerPort: 80
    hostPort: 80
    protocol: TCP
- role: worker
- role: worker
```

### Step 1 ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ
```bash
#!/bin/bash

# Week X Day X Lab 1: í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”
# ì„¤ëª…: ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ì‚­ì œ ë° ìƒˆ í´ëŸ¬ìŠ¤í„° ìƒì„±

set -e

echo "=== Lab í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™” ì‹œì‘ ==="

# 1. ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ì‚­ì œ
echo "1/3 ê¸°ì¡´ lab-cluster ì‚­ì œ ì¤‘..."
kind delete cluster --name lab-cluster 2>/dev/null || true

# 2. ìƒˆ í´ëŸ¬ìŠ¤í„° ìƒì„±
echo "2/3 ìƒˆ lab-cluster ìƒì„± ì¤‘..."
cat <<EOF | kind create cluster --config=-
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: lab-cluster
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 30080
    hostPort: 30080
  - containerPort: 30081
    hostPort: 30081
  - containerPort: 30082
    hostPort: 30082
  - containerPort: 443
    hostPort: 443
  - containerPort: 80
    hostPort: 80
- role: worker
- role: worker
EOF

# 3. í´ëŸ¬ìŠ¤í„° í™•ì¸
echo "3/3 í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸ ì¤‘..."
kubectl cluster-info
kubectl get nodes

echo ""
echo "=== Lab í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™” ì™„ë£Œ ==="
echo ""
echo "í´ëŸ¬ìŠ¤í„° ì •ë³´:"
echo "- ì´ë¦„: lab-cluster"
echo "- Control Plane: 1ê°œ"
echo "- Worker Node: 2ê°œ"
echo "- ì˜¤í”ˆ í¬íŠ¸: 30080-30082, 443, 80"
```

---

## âœ… ì²´í¬í¬ì¸íŠ¸ ì‘ì„± ê·œì¹™

### ì²´í¬í¬ì¸íŠ¸ êµ¬ì¡°
```markdown
## âœ… ì‹¤ìŠµ ì²´í¬í¬ì¸íŠ¸

### âœ… Step 1: í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”
- [ ] ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ì‚­ì œ ì™„ë£Œ
- [ ] ìƒˆ í´ëŸ¬ìŠ¤í„° ìƒì„± ì™„ë£Œ
- [ ] ë…¸ë“œ 3ê°œ ì •ìƒ ì‹¤í–‰ (1 control-plane + 2 worker)
- [ ] í¬íŠ¸ ë§¤í•‘ í™•ì¸

### âœ… Step 2: [ë‹¨ê³„ëª…]
- [ ] ì²´í¬ í•­ëª© 1
- [ ] ì²´í¬ í•­ëª© 2
- [ ] ì²´í¬ í•­ëª© 3

### âœ… ì „ì²´ ì‹œìŠ¤í…œ ê²€ì¦
- [ ] ëª¨ë“  Pod Running ìƒíƒœ
- [ ] ì„œë¹„ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥
- [ ] ì¸ì¦/ì¸ê°€ ë™ì‘ í™•ì¸
```

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ ì‘ì„± ê·œì¹™

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ… êµ¬ì¡°
```markdown
## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: [ë¬¸ì œ ìƒí™©]
```bash
# ì¦ìƒ
ì—ëŸ¬ ë©”ì‹œì§€ ë˜ëŠ” ì¦ìƒ ì„¤ëª…
```

**ì›ì¸**:
- ì›ì¸ 1
- ì›ì¸ 2

**í•´ê²° ë°©ë²•**:
```bash
# ì§„ë‹¨
kubectl logs pod-name

# í•´ê²°
kubectl apply -f fix.yaml
```

**ê²€ì¦**:
```bash
kubectl get pods
# ì˜ˆìƒ: Running ìƒíƒœ
```
```

---

## ğŸ§¹ ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ê·œì¹™

### cleanup.sh í‘œì¤€
```bash
#!/bin/bash

# Week X Day X Lab 1: ì‹¤ìŠµ í™˜ê²½ ì •ë¦¬
# ì„¤ëª…: ëª¨ë“  ì‹¤ìŠµ ë¦¬ì†ŒìŠ¤ ì‚­ì œ

echo "=== Lab í™˜ê²½ ì •ë¦¬ ì‹œì‘ ==="

# 1. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ
echo "1/3 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ ì¤‘..."
kubectl delete namespace lab-namespace --ignore-not-found=true

# 2. CRD ì‚­ì œ (í•„ìš”ì‹œ)
echo "2/3 CRD ì‚­ì œ ì¤‘..."
kubectl delete crd custom-resource --ignore-not-found=true

# 3. í´ëŸ¬ìŠ¤í„° ì‚­ì œ (ì„ íƒì‚¬í•­)
echo "3/3 í´ëŸ¬ìŠ¤í„° ì‚­ì œ ì¤‘..."
read -p "í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/N): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    kind delete cluster --name lab-cluster
    echo "âœ… í´ëŸ¬ìŠ¤í„° ì‚­ì œ ì™„ë£Œ"
else
    echo "â„¹ï¸  í´ëŸ¬ìŠ¤í„° ìœ ì§€"
fi

echo ""
echo "=== Lab í™˜ê²½ ì •ë¦¬ ì™„ë£Œ ==="
```

---

## ğŸ’¡ ì‹¤ìŠµ íšŒê³  ì‘ì„± ê·œì¹™

### íšŒê³  êµ¬ì¡°
```markdown
## ğŸ’¡ ì‹¤ìŠµ íšŒê³ 

### ğŸ¤ í˜ì–´ íšŒê³  (5ë¶„)
1. **ê°€ì¥ ì¸ìƒ ê¹Šì—ˆë˜ ë¶€ë¶„**: 
2. **ì–´ë ¤ì› ë˜ ì ê³¼ í•´ê²° ë°©ë²•**:
3. **ì‹¤ë¬´ ì ìš© ì•„ì´ë””ì–´**:

### ğŸ“Š í•™ìŠµ ì„±ê³¼
- **ê¸°ìˆ ì  ì„±ì·¨**: [êµ¬ì²´ì ì¸ ê¸°ìˆ  ìŠµë“]
- **ë¬¸ì œ í•´ê²°**: [í•´ê²°í•œ ë¬¸ì œë“¤]
- **ë‹¤ìŒ ë‹¨ê³„**: [ë‹¤ìŒ Lab ì—°ê³„]

### ğŸ”— ë‹¤ìŒ Lab ì¤€ë¹„
- **Lab 2 ì£¼ì œ**: [ë‹¤ìŒ Lab ì£¼ì œ]
- **ì—°ê³„ ë‚´ìš©**: [ì´ë²ˆ Labê³¼ì˜ ì—°ê²°ì ]
```

---

## ğŸ“Š ê²°ê³¼ ì˜ˆì‹œ ì‘ì„± ê·œì¹™

### ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼
```markdown
### ğŸ“Š ì˜ˆìƒ ê²°ê³¼

**ëª…ë ¹ì–´**:
```bash
kubectl get pods -n secure-app
```

**ì˜ˆìƒ ì¶œë ¥**:
```
NAME                           READY   STATUS    RESTARTS   AGE
auth-service-7d9f8b5c4-x7k2m   2/2     Running   0          2m
frontend-6b8d9c7f5-9h4j3       2/2     Running   0          2m
backend-5c7d8e9f6-3k5l7        2/2     Running   0          2m
```

**ì„¤ëª…**:
- `READY 2/2`: ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆ + Istio Sidecar
- `STATUS Running`: ì •ìƒ ì‹¤í–‰ ì¤‘
- `RESTARTS 0`: ì¬ì‹œì‘ ì—†ìŒ (ì•ˆì •ì )
```

---

## ğŸ¯ Lab ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ í¬í•¨ ì‚¬í•­
- [ ] ì „ì²´ ì•„í‚¤í…ì²˜ Mermaid ë‹¤ì´ì–´ê·¸ë¨
- [ ] ì—­í• ë³„ ìƒì„¸ ì„¤ëª…
- [ ] íŠ¸ë˜í”½ íë¦„ Sequence Diagram
- [ ] Step 1: í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™” (control-plane 1 + worker 2)
- [ ] í¬íŠ¸ ì„¤ì •: 30080-30082, 443, 80
- [ ] ê° Stepë³„ ìŠ¤í¬ë¦½íŠ¸ (lab_scripts/lab1/)
- [ ] ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë§í¬
- [ ] ìŠ¤í¬ë¦½íŠ¸ í•µì‹¬ ë¶€ë¶„ ì„¤ëª…
- [ ] ì˜ˆìƒ ê²°ê³¼ ì¶œë ¥
- [ ] ì‹¤ìŠµ ì²´í¬í¬ì¸íŠ¸
- [ ] íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ
- [ ] cleanup.sh ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸
- [ ] ì‹¤ìŠµ íšŒê³ 

### í’ˆì§ˆ ê¸°ì¤€
- [ ] ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê°€ëŠ¥ (í…ŒìŠ¤íŠ¸ ì™„ë£Œ)
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í¬í•¨
- [ ] ì§„í–‰ ìƒí™© í‘œì‹œ
- [ ] ê²°ê³¼ ê²€ì¦ í¬í•¨
- [ ] ëª…í™•í•œ ì„¤ëª…ê³¼ ì£¼ì„

---

## ğŸ“ íŒŒì¼ êµ¬ì¡° ì˜ˆì‹œ

```
theory/week_04/day3/
â”œâ”€â”€ lab_1.md                          # Lab ë¬¸ì„œ
â”œâ”€â”€ lab_scripts/
â”‚   â””â”€â”€ lab1/
â”‚       â”œâ”€â”€ step1-setup-cluster.sh    # í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”
â”‚       â”œâ”€â”€ step2-install-istio.sh    # Istio ì„¤ì¹˜
â”‚       â”œâ”€â”€ step3-deploy-auth.sh      # ì¸ì¦ ì„œë¹„ìŠ¤ ë°°í¬
â”‚       â”œâ”€â”€ step4-configure-mtls.sh   # mTLS ì„¤ì •
â”‚       â”œâ”€â”€ step5-setup-jwt.sh        # JWT ì„¤ì •
â”‚       â”œâ”€â”€ step6-test-auth.sh        # ì¸ì¦ í…ŒìŠ¤íŠ¸
â”‚       â”œâ”€â”€ test-system.sh            # ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
â”‚       â””â”€â”€ cleanup.sh                # í™˜ê²½ ì •ë¦¬
```

---

ì´ ê·œì¹™ì„ ë”°ë¼ ëª¨ë“  Labì„ ì¼ê´€ë˜ê²Œ ì‘ì„±í•©ë‹ˆë‹¤.
