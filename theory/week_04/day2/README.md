# Week 4 Day 2: API Gatewayì™€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬

<div align="center">

**ğŸŒ ë‹¨ì¼ ì§„ì…ì ** â€¢ **ğŸ” ë™ì  ë°œê²¬** â€¢ **âš–ï¸ íŠ¸ë˜í”½ ë¶„ì‚°**

*ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ í†µì‹ ì˜ ì§„í™” - í˜¼ëˆì—ì„œ ì§ˆì„œë¡œ*

</div>

---

## ğŸ•˜ ì¼ì¼ ìŠ¤ì¼€ì¤„

### ğŸ“Š ì‹œê°„ ë°°ë¶„
```
ğŸ“š ì´ë¡  ê°•ì˜: 2.5ì‹œê°„ (50ë¶„Ã—3ì„¸ì…˜) - ì˜¤ì „ ì§‘ì¤‘ í•™ìŠµ
ğŸ› ï¸ ì‹¤ìŠµ ì„¸ì…˜: 3.5ì‹œê°„ (110ë¶„Ã—2ì„¸ì…˜ + 120ë¶„ Challenge) - ë‹¹ì¼ í•™ìŠµ ì ìš©
ğŸ½ï¸ ì ì‹¬ì‹œê°„: 1ì‹œê°„ (ì‹¤ìŠµ 1 ì¤‘ê°„ì— í¬í•¨)
ğŸ‘¥ í•™ìƒ ì¼€ì–´: ê°œë³„ ë§ì¶¤ ì§€ì› (í•„ìš”ì‹œ)
```

### ğŸ—“ï¸ ìƒì„¸ ìŠ¤ì¼€ì¤„
| ì‹œê°„ | êµ¬ë¶„ | ë‚´ìš© | ëª©ì  |
|------|------|------|------|
| **09:00-09:50** | ğŸ“š ì´ë¡  1 | [API Gateway íŒ¨í„´](./session_1.md) (50ë¶„) | ë‹¨ì¼ ì§„ì…ì ì˜ í˜ |
| **09:50-10:00** | â˜• íœ´ì‹ | 10ë¶„ íœ´ì‹ | |
| **10:00-10:50** | ğŸ“š ì´ë¡  2 | [ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬](./session_2.md) (50ë¶„) | ë™ì  ì„œë¹„ìŠ¤ ì°¾ê¸° |
| **10:50-11:00** | â˜• íœ´ì‹ | 10ë¶„ íœ´ì‹ | |
| **11:00-11:50** | ğŸ“š ì´ë¡  3 | [ë¡œë“œë°¸ëŸ°ì‹±ê³¼ ë¼ìš°íŒ…](./session_3.md) (50ë¶„) | íŠ¸ë˜í”½ ë¶„ì‚° ì „ëµ |
| **11:50-12:00** | â˜• íœ´ì‹ | 10ë¶„ íœ´ì‹ | |
| **12:00-13:50** | ğŸ› ï¸ ì‹¤ìŠµ 1 | [Kong Gateway êµ¬ì¶•](./lab_1.md) (110ë¶„) | API Gateway êµ¬í˜„ |
| **13:00-14:00** | ğŸ½ï¸ ì ì‹¬ | ì ì‹¬ì‹œê°„ (ì‹¤ìŠµ ì¤‘ 60ë¶„) | |
| **14:00-15:50** | ğŸ› ï¸ ì‹¤ìŠµ 2 | [Service Mesh êµ¬ì„±](./handson_1.md) (110ë¶„) | íŠ¸ë˜í”½ ê´€ë¦¬ |
| **15:50-16:00** | â˜• íœ´ì‹ | 10ë¶„ íœ´ì‹ | |
| **16:00-18:00** | ğŸ® Challenge | [Gateway ì¥ì•  ëŒ€ì‘](./challenge_1.md) (120ë¶„) | ì‹¤ì „ ë¬¸ì œ í•´ê²° |

---

## ğŸ¯ ì¼ì¼ í•™ìŠµ ëª©í‘œ

### ğŸ“š ì´ë¡  í•™ìŠµ ëª©í‘œ
- **ì§„í™” ì´í•´**: ì™œ API Gatewayê°€ í•„ìš”í•˜ê²Œ ë˜ì—ˆëŠ”ê°€? (ë¬¸ì œ â†’ í•´ê²° ìŠ¤í† ë¦¬)
- **ë¹„êµ ë¶„ì„**: Kong vs Istio vs AWS API Gateway - ì–¸ì œ ë¬´ì—‡ì„ ì„ íƒí•˜ëŠ”ê°€?
- **íŒ¨í„´ ìŠµë“**: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì˜ ë‹¤ì–‘í•œ ì ‘ê·¼ë²•ê³¼ íŠ¸ë ˆì´ë“œì˜¤í”„
- **ì‹¤ë¬´ ì—°ê³„**: Netflix, Uberì˜ ì‹¤ì œ Gateway ì•„í‚¤í…ì²˜ ì§„í™” ê³¼ì •

### ğŸ› ï¸ ì‹¤ìŠµ í•™ìŠµ ëª©í‘œ
- **Gateway êµ¬ì¶•**: Kong API Gateway ì„¤ì¹˜ ë° ë¼ìš°íŒ… êµ¬ì„±
- **ì¸ì¦/ì¸ê°€**: OAuth2, JWT ê¸°ë°˜ ë³´ì•ˆ êµ¬í˜„
- **Service Mesh**: Istioë¥¼ ì´ìš©í•œ ê³ ê¸‰ íŠ¸ë˜í”½ ê´€ë¦¬
- **ì¥ì•  ëŒ€ì‘**: Circuit Breaker, Retry, Timeout ì •ì±… ì ìš©

### ğŸ¤ í˜‘ì—… í•™ìŠµ ëª©í‘œ
- **ì•„í‚¤í…ì²˜ ì„¤ê³„**: íŒ€ë³„ Gateway ì „ëµ ìˆ˜ë¦½
- **ì—­í•  ë¶„ë‹´**: Gateway/Backend/Frontend ë‹´ë‹¹ì í˜‘ì—…
- **í†µí•© í…ŒìŠ¤íŠ¸**: ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- **ë¬¸ì œ í•´ê²°**: ì‹¤ì œ ì¥ì•  ìƒí™© íŒ€ ëŒ€ì‘

---

## ğŸ“š ì´ë¡  ì„¸ì…˜ ê°œìš”

### Session 1: API Gateway íŒ¨í„´ - ë‹¨ì¼ ì§„ì…ì ì˜ í˜ (50ë¶„)
> **í•µì‹¬ ì§ˆë¬¸**: "Kubernetes Gateway API vs êµ¬í˜„ì²´ë“¤ - ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€?"

**ğŸ”„ ê¸°ìˆ  ì§„í™” ìŠ¤í† ë¦¬**:
```
ë¬¸ì œ 1: í´ë¼ì´ì–¸íŠ¸ê°€ ìˆ˜ì‹­ ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì§ì ‘ í˜¸ì¶œ
  â†“ ë³µì¡ì„± í­ë°œ, ë³´ì•ˆ ì·¨ì•½, ì¤‘ë³µ ì½”ë“œ
í•´ê²° 1: Nginx/HAProxy - ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
  â†“ í•˜ì§€ë§Œ ì„¤ì • íŒŒì¼ ê´€ë¦¬ ë³µì¡
í•´ê²° 2: Ingress - Kubernetes í‘œì¤€
  â†“ í•˜ì§€ë§Œ í‘œí˜„ë ¥ ë¶€ì¡±, ì–´ë…¸í…Œì´ì…˜ ë‚œë¦½
í•´ê²° 3: Kong/Istio/AWS ALB - ê°•ë ¥í•˜ì§€ë§Œ ê°ì ë‹¤ë¥¸ ë°©ì‹
  â†“ í•™ìŠµ ê³¡ì„ , ë²¤ë” ì¢…ì†, ì´ì‹ì„± ë¬¸ì œ
í•´ê²° 4: Gateway API - í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ (â˜… ìš°ë¦¬ì˜ ì„ íƒ)
  â†“ êµ¬í˜„ì²´ëŠ” ì„ íƒ, ì¸í„°í˜ì´ìŠ¤ëŠ” í‘œì¤€
```

**í•™ìŠµ ë‚´ìš©**:

**1. Gateway APIë€ ë¬´ì—‡ì¸ê°€?**
- **í‘œì¤€ ì¸í„°í˜ì´ìŠ¤**: Kubernetes SIG-Networkì˜ ê³µì‹ í‘œì¤€
- **êµ¬í˜„ì²´ ë…ë¦½**: Kong, Istio, AWS ALB ë“±ì´ êµ¬í˜„
- **ì—­í•  ë¶„ë¦¬**: GatewayClass(êµ¬í˜„ì²´) / Gateway(ì¸í”„ë¼) / Route(ì•±)

**2. ì£¼ìš” êµ¬í˜„ì²´ ë¹„êµ**:

| êµ¬í˜„ì²´ | íŠ¹ì§• | ì¥ì  | ë‹¨ì  | ì‚¬ìš© ì‹œê¸° |
|--------|------|------|------|----------|
| **Kubernetes Gateway API** | í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ | ì´ì‹ì„±, í‘œì¤€í™” | êµ¬í˜„ì²´ í•„ìš” | ëª¨ë“  ê²½ìš° (ì¸í„°í˜ì´ìŠ¤) |
| **Istio** | Service Mesh í†µí•© | ì „ì²´ ê¸°ëŠ¥, mTLS | ë³µì¡ë„ ë†’ìŒ | ëŒ€ê·œëª¨ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ |
| **Kong** | API ê´€ë¦¬ í”Œë«í¼ | í”ŒëŸ¬ê·¸ì¸ í’ë¶€ | ìƒìš© ê¸°ëŠ¥ ìœ ë£Œ | API ê´€ë¦¬ í•„ìš” ì‹œ |
| **AWS ALB** | AWS ë„¤ì´í‹°ë¸Œ | AWS í†µí•© ì™„ë²½ | AWS ì¢…ì† | AWS í™˜ê²½ |
| **Nginx** | ê²½ëŸ‰ í”„ë¡ì‹œ | ë‹¨ìˆœ, ë¹ ë¦„ | ê¸°ëŠ¥ ì œí•œì  | ê°„ë‹¨í•œ ë¼ìš°íŒ… |

**3. Gateway APIì˜ í•µì‹¬ ê°œë…**:

```yaml
# GatewayClass - êµ¬í˜„ì²´ ì„ íƒ
apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: istio  # ë˜ëŠ” kong, aws-alb ë“±
spec:
  controllerName: istio.io/gateway-controller

---
# Gateway - ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ (Ops íŒ€)
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: production-gateway
spec:
  gatewayClassName: istio
  listeners:
  - name: http
    port: 80
    protocol: HTTP

---
# HTTPRoute - ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ìš°íŒ… (Dev íŒ€)
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: my-app-route
spec:
  parentRefs:
  - name: production-gateway
  rules:
  - matches:
    - path:
        value: /api
    backendRefs:
    - name: api-service
      port: 80
```

**4. ì™œ Gateway APIë¥¼ ì„ íƒí•˜ëŠ”ê°€?**

**í‘œì¤€í™”ì˜ ì´ì **:
- êµ¬í˜„ì²´ êµì²´ ê°€ëŠ¥ (Istio â†’ Kong ì „í™˜ ì‹œ Routeë§Œ ìœ ì§€)
- ë©€í‹° í´ë¼ìš°ë“œ ì´ì‹ì„±
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- ì»¤ë®¤ë‹ˆí‹° í‘œì¤€ (Kubernetes SIG)

**êµ¬í˜„ì²´ë³„ ì„ íƒ ê¸°ì¤€**:
```
ê°„ë‹¨í•œ ë¼ìš°íŒ… â†’ Nginx Gateway
API ê´€ë¦¬ í•„ìš” â†’ Kong Gateway
Service Mesh ì „ì²´ â†’ Istio Gateway
AWS í™˜ê²½ â†’ AWS Load Balancer Controller
```

**ì‹¤ë¬´ ì—°ê³„**:
- Kubernetes 1.29+ Gateway API GA
- ì£¼ìš” í´ë¼ìš°ë“œ ì œê³µì ëª¨ë‘ ì§€ì›
- CNCF í”„ë¡œì íŠ¸ë“¤ì˜ í‘œì¤€ ì±„íƒ

### Session 2: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ - ë™ì  ì„œë¹„ìŠ¤ ì°¾ê¸° (50ë¶„)
> **í•µì‹¬ ì§ˆë¬¸**: "ìˆ˜ë°± ê°œì˜ ì„œë¹„ìŠ¤ê°€ ì„œë¡œë¥¼ ì–´ë–»ê²Œ ì°¾ëŠ”ê°€?"

**ğŸ”„ ê¸°ìˆ  ì§„í™” ìŠ¤í† ë¦¬**:
```
ë¬¸ì œ 1: í•˜ë“œì½”ë”©ëœ IP ì£¼ì†Œì™€ í¬íŠ¸
  â†“ ë°°í¬ë§ˆë‹¤ ì„¤ì • ë³€ê²½, ì¥ì•  ì‹œ ìˆ˜ë™ ëŒ€ì‘
í•´ê²° 1: ì„¤ì • íŒŒì¼ ì™¸ë¶€í™” (Config Server)
  â†“ í•˜ì§€ë§Œ ì—¬ì „íˆ ì •ì , ì‹¤ì‹œê°„ ë³€ê²½ ë¶ˆê°€
í•´ê²° 2: ì„œë¹„ìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ (Consul, Eureka)
  â†“ ë™ì  ë“±ë¡/í•´ì œ, Health Check
í•´ê²° 3: Kubernetes DNS + Service
  â†“ í”Œë«í¼ ë„¤ì´í‹°ë¸Œ ë””ìŠ¤ì»¤ë²„ë¦¬
```

**í•™ìŠµ ë‚´ìš©**:
- **ë¬¸ì œì˜ ì‹œì‘**: ì •ì  ì„¤ì •ì˜ í•œê³„
  - IP ë³€ê²½, ìŠ¤ì¼€ì¼ë§, ì¥ì•  ëŒ€ì‘ ì–´ë ¤ì›€
  - ì´ˆê¸° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ê³ í†µ
  
- **Client-side Discovery**: Eureka, Consul
  - í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¡°íšŒ
  - ì¥ì : ìœ ì—°ì„±, ë‹¨ì : í´ë¼ì´ì–¸íŠ¸ ë³µì¡ë„
  
- **Server-side Discovery**: Kubernetes Service
  - í”Œë«í¼ì´ ë””ìŠ¤ì»¤ë²„ë¦¬ ë‹´ë‹¹
  - ì¥ì : ë‹¨ìˆœì„±, ë‹¨ì : í”Œë«í¼ ì¢…ì†

**ì‹¤ë¬´ ì—°ê³„**:
- Netflix Eurekaì˜ íƒ„ìƒ ë°°ê²½
- Kubernetes í™˜ê²½ì—ì„œì˜ ì„ íƒ
- í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•

### Session 3: ë¡œë“œë°¸ëŸ°ì‹±ê³¼ ë¼ìš°íŒ… - íŠ¸ë˜í”½ ë¶„ì‚° ì „ëµ (50ë¶„)
> **í•µì‹¬ ì§ˆë¬¸**: "ì–´ë–»ê²Œ íŠ¸ë˜í”½ì„ ë˜‘ë˜‘í•˜ê²Œ ë¶„ì‚°í•˜ëŠ”ê°€?"

**ğŸ”„ ê¸°ìˆ  ì§„í™” ìŠ¤í† ë¦¬**:
```
ë¬¸ì œ 1: ë‹¨ìˆœ Round Robin
  â†“ ì„œë²„ ì„±ëŠ¥ ì°¨ì´ ë¬´ì‹œ, ì„¸ì…˜ ìœ ì§€ ë¶ˆê°€
í•´ê²° 1: Weighted Round Robin + Sticky Session
  â†“ í•˜ì§€ë§Œ ì„œë²„ ìƒíƒœ ì‹¤ì‹œê°„ ë°˜ì˜ ì•ˆë¨
í•´ê²° 2: Dynamic Load Balancing
  â†“ Health Check ê¸°ë°˜ ë™ì  ê°€ì¤‘ì¹˜
í•´ê²° 3: Intelligent Routing
  â†“ ì§€ì—°ì‹œê°„, ì—ëŸ¬ìœ¨ ê¸°ë°˜ ë¼ìš°íŒ…
```

**í•™ìŠµ ë‚´ìš©**:
- **L4 vs L7 ë¡œë“œë°¸ëŸ°ì‹±**: ê³„ì¸µë³„ ì°¨ì´
  - L4: TCP/UDP ë ˆë²¨, ë¹ ë¥´ì§€ë§Œ ì œí•œì 
  - L7: HTTP ë ˆë²¨, ëŠë¦¬ì§€ë§Œ ê°•ë ¥
  
- **ë¼ìš°íŒ… ì „ëµ ë¹„êµ**:
  - Round Robin: ë‹¨ìˆœí•˜ì§€ë§Œ ê³µí‰í•˜ì§€ ì•ŠìŒ
  - Least Connection: ì—°ê²° ìˆ˜ ê¸°ë°˜
  - Weighted: ì„œë²„ ì„±ëŠ¥ ê³ ë ¤
  - Consistent Hashing: ìºì‹œ ì¹œí™”ì 
  
- **ê³ ê¸‰ íŒ¨í„´**:
  - ì¹´ë‚˜ë¦¬ ë°°í¬: ì ì§„ì  íŠ¸ë˜í”½ ì „í™˜
  - ë¸”ë£¨-ê·¸ë¦°: ì¦‰ì‹œ ì „í™˜
  - A/B í…ŒìŠ¤íŒ…: ì‚¬ìš©ì ê¸°ë°˜ ë¼ìš°íŒ…

**ì‹¤ë¬´ ì—°ê³„**:
- AWS ALB vs NLB ì„ íƒ ê¸°ì¤€
- Istioì˜ íŠ¸ë˜í”½ ë¶„í•  ê¸°ëŠ¥
- ì‹¤ì œ ì¹´ë‚˜ë¦¬ ë°°í¬ ì‚¬ë¡€

---
## ğŸ› ï¸ ì‹¤ìŠµ ì„¸ì…˜ ê°œìš”

### Lab 1: Kubernetes Gateway API êµ¬ì¶• ì‹¤ìŠµ (110ë¶„)
> **ëª©í‘œ**: Gateway APIë¥¼ ì´ìš©í•œ í”„ë¡œë•ì…˜ê¸‰ API Gateway êµ¬ì¶•

**ì‹¤ìŠµ êµ¬ì„±**:
```mermaid
graph TB
    subgraph "ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸"
        C1[Web Browser]
        C2[Mobile App]
        C3[3rd Party API]
    end
    
    subgraph "Gateway API Resources"
        GC[GatewayClass<br/>êµ¬í˜„ì²´ ì„ íƒ]
        GW[Gateway<br/>ë¦¬ìŠ¤ë„ˆ ì •ì˜]
        HR[HTTPRoute<br/>ë¼ìš°íŒ… ê·œì¹™]
    end
    
    subgraph "Gateway êµ¬í˜„ì²´"
        I[Istio Gateway<br/>ë˜ëŠ”<br/>Kong Gateway]
    end
    
    subgraph "ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤"
        S1[User Service]
        S2[Product Service]
        S3[Order Service]
    end
    
    C1 --> GW
    C2 --> GW
    C3 --> GW
    
    GC -.-> I
    GW --> I
    HR --> I
    
    I --> S1
    I --> S2
    I --> S3
    
    style GC fill:#ff9800
    style GW fill:#4caf50
    style HR fill:#2196f3
    style I fill:#9c27b0
```

**ì‹¤ìŠµ ë‹¨ê³„**:
1. **Gateway API ì„¤ì¹˜ ë° êµ¬ì„±** (25ë¶„)
   - Gateway API CRDs ì„¤ì¹˜
   - GatewayClass ì„ íƒ (Istio ë˜ëŠ” Kong)
   - Gateway ë¦¬ì†ŒìŠ¤ ìƒì„±

2. **HTTPRoute ë¼ìš°íŒ… ê·œì¹™** (25ë¶„)
   - Path ê¸°ë°˜ ë¼ìš°íŒ…
   - Header ê¸°ë°˜ ë¼ìš°íŒ…
   - ê°€ì¤‘ì¹˜ ê¸°ë°˜ íŠ¸ë˜í”½ ë¶„í•  (ì¹´ë‚˜ë¦¬)

3. **ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„** (30ë¶„)
   - TLS ì¸ì¦ì„œ ìë™ ê´€ë¦¬
   - Request/Response í—¤ë” ì¡°ì‘
   - Timeout ë° Retry ì •ì±…
   - Rate Limiting (êµ¬í˜„ì²´ë³„)

4. **í†µí•© í…ŒìŠ¤íŠ¸ ë° ë¹„êµ** (30ë¶„)
   - Gateway API vs Ingress ë¹„êµ
   - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
   - ê´€ì¸¡ì„± (ë©”íŠ¸ë¦­, ë¡œê·¸, íŠ¸ë ˆì´ìŠ¤)

**í•™ìŠµ íš¨ê³¼**:
- Kubernetes ë„¤ì´í‹°ë¸Œ Gateway êµ¬ì„± ê²½í—˜
- í‘œì¤€ ê¸°ë°˜ ì ‘ê·¼ë²•ì˜ ì¥ì  ì²´í—˜
- ì—­í•  ê¸°ë°˜ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ì´í•´
- ë¯¸ë˜ ì§€í–¥ì  ì•„í‚¤í…ì²˜ íŒ¨í„´ ìŠµë“

### Hands-on 1: Gateway API ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ (110ë¶„)
> **ëª©í‘œ**: Gateway APIë¥¼ ì´ìš©í•œ ì¹´ë‚˜ë¦¬ ë°°í¬, A/B í…ŒìŠ¤íŒ…, ë©€í‹° í…Œë„Œì‹œ

**ì‹¤ìŠµ êµ¬ì„±**:
```mermaid
graph TB
    subgraph "Gateway API Resources"
        GW[Gateway<br/>HTTPS Listener]
        HR1[HTTPRoute<br/>ì¹´ë‚˜ë¦¬ ë°°í¬<br/>90% v1, 10% v2]
        HR2[HTTPRoute<br/>A/B í…ŒìŠ¤íŒ…<br/>Header ê¸°ë°˜]
        HR3[HTTPRoute<br/>ë©€í‹° ë„¤ì„ìŠ¤í˜ì´ìŠ¤]
    end
    
    subgraph "Backend Services"
        subgraph "Service v1"
            S1A[Pod v1-1]
            S1B[Pod v1-2]
        end
        
        subgraph "Service v2"
            S2A[Pod v2-1]
        end
        
        subgraph "Team A Namespace"
            TA[Team A Service]
        end
        
        subgraph "Team B Namespace"
            TB[Team B Service]
        end
    end
    
    GW --> HR1
    GW --> HR2
    GW --> HR3
    
    HR1 --> S1A
    HR1 --> S1B
    HR1 --> S2A
    
    HR2 --> S1A
    HR2 --> S2A
    
    HR3 --> TA
    HR3 --> TB
    
    style GW fill:#ff5722
    style HR1 fill:#4caf50
    style HR2 fill:#4caf50
    style HR3 fill:#4caf50
    style S1A fill:#2196f3
    style S1B fill:#2196f3
    style S2A fill:#ff9800
```

**ì‹¤ìŠµ ë‹¨ê³„**:
1. **ì¹´ë‚˜ë¦¬ ë°°í¬ êµ¬í˜„** (30ë¶„)
   - HTTPRoute ê°€ì¤‘ì¹˜ ê¸°ë°˜ íŠ¸ë˜í”½ ë¶„í• 
   - ì ì§„ì  íŠ¸ë˜í”½ ì „í™˜ (10% â†’ 30% â†’ 50% â†’ 100%)
   - ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§ ë° ë¡¤ë°± ì‹œë‚˜ë¦¬ì˜¤

2. **A/B í…ŒìŠ¤íŒ… êµ¬í˜„** (25ë¶„)
   - Header ê¸°ë°˜ ë¼ìš°íŒ… (User-Agent, X-Version)
   - Query Parameter ê¸°ë°˜ ë¼ìš°íŒ…
   - Cookie ê¸°ë°˜ ì‚¬ìš©ì ê·¸ë£¹ ë¶„ë¦¬

3. **ê³ ê¸‰ ë¼ìš°íŒ… íŒ¨í„´** (30ë¶„)
   - URL Rewrite ë° Redirect
   - Request/Response Header ì¡°ì‘
   - Timeout ë° Retry ì •ì±…
   - Mirror Traffic (íŠ¸ë˜í”½ ë³µì œ)

4. **ë©€í‹° í…Œë„Œì‹œ êµ¬ì„±** (25ë¶„)
   - ReferenceGrantë¥¼ ì´ìš©í•œ í¬ë¡œìŠ¤ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¼ìš°íŒ…
   - íŒ€ë³„ HTTPRoute ê¶Œí•œ ë¶„ë¦¬ (RBAC)
   - ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ Gateway ê³µìœ 

**í•™ìŠµ íš¨ê³¼**:
- Gateway APIì˜ ê°•ë ¥í•œ í‘œí˜„ë ¥ ì²´í—˜
- ë¬´ì¤‘ë‹¨ ë°°í¬ ì „ëµ ì‹¤ë¬´ ì ìš©
- í‘œì¤€ ê¸°ë°˜ ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„
- ë©€í‹° í…Œë„Œì‹œ ì•„í‚¤í…ì²˜ ì‹¤ìŠµ

---

## ğŸ® Challenge: Gateway êµ¬í˜„ì²´ ë¹„êµ ë° ì¥ì•  ëŒ€ì‘ (120ë¶„)

### ğŸ¯ Challenge ëª©í‘œ
**ì‹œë‚˜ë¦¬ì˜¤**: 
ëŒ€ê·œëª¨ ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼ "CloudMart"ê°€ Gateway APIë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.
í˜„ì¬ Nginx êµ¬í˜„ì²´ë¥¼ ì‚¬ìš© ì¤‘ì´ì§€ë§Œ, Istioë¡œ ì „í™˜ì„ ê³ ë ¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ë‘ êµ¬í˜„ì²´ë¥¼ ë¹„êµí•˜ê³ , ì‹¤ì œ ì¥ì•  ìƒí™©ì— ëŒ€ì‘í•´ì•¼ í•©ë‹ˆë‹¤.

### Part 1: êµ¬í˜„ì²´ ë¹„êµ ì‹¤ìŠµ (60ë¶„)

**ë¯¸ì…˜ 1: Nginx Gateway êµ¬ì„±** (20ë¶„)
```yaml
# Nginx Gateway êµ¬í˜„
apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: nginx
spec:
  controllerName: gateway.nginx.org/nginx-gateway-controller

# ë™ì¼í•œ HTTPRoute ì‚¬ìš©
```

**ë¯¸ì…˜ 2: Istio Gateway êµ¬ì„±** (20ë¶„)
```yaml
# Istio Gateway êµ¬í˜„
apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: istio
spec:
  controllerName: istio.io/gateway-controller

# ë™ì¼í•œ HTTPRoute ì¬ì‚¬ìš© (ì´ì‹ì„± í™•ì¸)
```

**ë¯¸ì…˜ 3: ì„±ëŠ¥ ë° ê¸°ëŠ¥ ë¹„êµ** (20ë¶„)
| ë¹„êµ í•­ëª© | Nginx Gateway | Istio Gateway | ê²°ê³¼ |
|----------|---------------|---------------|------|
| ì‘ë‹µ ì‹œê°„ | ì¸¡ì • | ì¸¡ì • | ? |
| ì²˜ë¦¬ëŸ‰ (RPS) | ì¸¡ì • | ì¸¡ì • | ? |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | ì¸¡ì • | ì¸¡ì • | ? |
| mTLS ì§€ì› | âŒ | âœ… | Istio ìš°ì„¸ |
| ê´€ì¸¡ì„± | ê¸°ë³¸ | í’ë¶€ | Istio ìš°ì„¸ |
| ì„¤ì • ë³µì¡ë„ | ë‚®ìŒ | ë†’ìŒ | Nginx ìš°ì„¸ |

### Part 2: ì¥ì•  ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤ (60ë¶„)

**ì‹œë‚˜ë¦¬ì˜¤ 1: íŠ¸ë˜í”½ ê¸‰ì¦ìœ¼ë¡œ ì¸í•œ Gateway ê³¼ë¶€í•˜** (15ë¶„)
```
ì¦ìƒ:
- Gateway ì‘ë‹µ ì‹œê°„ ê¸‰ì¦ (50ms â†’ 5ì´ˆ)
- ì¼ë¶€ ìš”ì²­ íƒ€ì„ì•„ì›ƒ
- CPU ì‚¬ìš©ë¥  95%

í•´ê²° ê³¼ì œ:
1. Gateway Pod HPA ì„¤ì •
2. Rate Limiting ì ìš©
3. ë°±ì—”ë“œ ì„œë¹„ìŠ¤ Circuit Breaker
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì¹´ë‚˜ë¦¬ ë°°í¬ ì¤‘ ì‹ ê·œ ë²„ì „ ì˜¤ë¥˜** (15ë¶„)
```
ì¦ìƒ:
- 10% íŠ¸ë˜í”½ì—ì„œ 500 ì—ëŸ¬
- ì‹ ê·œ ë²„ì „ API í˜¸í™˜ì„± ë¬¸ì œ
- ê¸´ê¸‰ ë¡¤ë°± í•„ìš”

í•´ê²° ê³¼ì œ:
1. HTTPRoute ê°€ì¤‘ì¹˜ ì¦‰ì‹œ ì¡°ì • (10% â†’ 0%)
2. ì˜¤ë¥˜ ì›ì¸ ë¶„ì„ (ë¡œê·¸, ë©”íŠ¸ë¦­)
3. ì•ˆì „í•œ ì¬ë°°í¬ ì „ëµ ìˆ˜ë¦½
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: TLS ì¸ì¦ì„œ ë§Œë£Œ** (15ë¶„)
```
ì¦ìƒ:
- HTTPS ìš”ì²­ ì‹¤íŒ¨
- ì¸ì¦ì„œ ë§Œë£Œ ê²½ê³ 
- ì‚¬ìš©ì ì ‘ê·¼ ë¶ˆê°€

í•´ê²° ê³¼ì œ:
1. cert-managerë¥¼ ì´ìš©í•œ ìë™ ê°±ì‹  ì„¤ì •
2. Gateway TLS ì„¤ì • ì—…ë°ì´íŠ¸
3. ì¸ì¦ì„œ ë§Œë£Œ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼
```

**ì‹œë‚˜ë¦¬ì˜¤ 4: êµ¬í˜„ì²´ ì „í™˜ (Nginx â†’ Istio)** (15ë¶„)
```
ìš”êµ¬ì‚¬í•­:
- ë¬´ì¤‘ë‹¨ìœ¼ë¡œ Nginxì—ì„œ Istioë¡œ ì „í™˜
- ê¸°ì¡´ HTTPRoute ì¬ì‚¬ìš©
- íŠ¸ë˜í”½ ì ì§„ì  ì „í™˜

í•´ê²° ê³¼ì œ:
1. Istio Gateway ë³‘ë ¬ ë°°í¬
2. DNS/LoadBalancer íŠ¸ë˜í”½ ë¶„í• 
3. ëª¨ë‹ˆí„°ë§ ë° ê²€ì¦ í›„ ì™„ì „ ì „í™˜
```

### ğŸ† í‰ê°€ ê¸°ì¤€
- **êµ¬í˜„ì²´ ì´í•´** (25ì ): Nginx vs Istio ì°¨ì´ì  ëª…í™•íˆ ì´í•´
- **ë¬¸ì œ ì§„ë‹¨** (25ì ): ê·¼ë³¸ ì›ì¸ íŒŒì•… ì†ë„ì™€ ì •í™•ì„±
- **í•´ê²° ë°©ë²•** (25ì ): íš¨ê³¼ì ì¸ í•´ê²°ì±… ì ìš©
- **ì´ì‹ì„± ê²€ì¦** (15ì ): Gateway API í‘œì¤€ì˜ ì´ì‹ì„± í™•ì¸
- **íŒ€ì›Œí¬** (10ì ): ì—­í•  ë¶„ë‹´ ë° í˜‘ì—…

### ğŸ’¡ í•™ìŠµ í¬ì¸íŠ¸
1. **í‘œì¤€ì˜ í˜**: ë™ì¼í•œ HTTPRouteê°€ ë‹¤ë¥¸ êµ¬í˜„ì²´ì—ì„œ ë™ì‘
2. **êµ¬í˜„ì²´ ì„ íƒ**: ìš”êµ¬ì‚¬í•­ì— ë”°ë¥¸ ì ì ˆí•œ êµ¬í˜„ì²´ ì„ íƒ
3. **ì „í™˜ ì „ëµ**: ë¬´ì¤‘ë‹¨ êµ¬í˜„ì²´ ì „í™˜ ë°©ë²•
4. **íŠ¸ë ˆì´ë“œì˜¤í”„**: ì„±ëŠ¥ vs ê¸°ëŠ¥ vs ë³µì¡ë„

---

## âœ… ì¼ì¼ ì²´í¬í¬ì¸íŠ¸

### ğŸ“š ì´ë¡  ì´í•´ë„ ì²´í¬
- [ ] **ì§„í™” ì´í•´**: ê° ê¸°ìˆ ì´ ë“±ì¥í•œ ë°°ê²½ê³¼ í•´ê²°í•œ ë¬¸ì œ ì„¤ëª… ê°€ëŠ¥
- [ ] **ë¹„êµ ë¶„ì„**: Kong vs Istio vs AWS API Gateway ì°¨ì´ì  ì´í•´
- [ ] **íŒ¨í„´ ì„ íƒ**: ìƒí™©ì— ë§ëŠ” ë””ìŠ¤ì»¤ë²„ë¦¬ íŒ¨í„´ ì„ íƒ ëŠ¥ë ¥
- [ ] **íŠ¸ë ˆì´ë“œì˜¤í”„**: ê° ì ‘ê·¼ë²•ì˜ ì¥ë‹¨ì  ëª…í™•íˆ ì´í•´

### ğŸ› ï¸ ì‹¤ìŠµ ì™„ì„±ë„ ì²´í¬
- [ ] **Kong Gateway**: ë¼ìš°íŒ…, ì¸ì¦, Rate Limiting êµ¬í˜„
- [ ] **Istio Mesh**: íŠ¸ë˜í”½ ë¶„í•  ë° ì¹´ë‚˜ë¦¬ ë°°í¬ ì„±ê³µ
- [ ] **íšŒë³µì„± íŒ¨í„´**: Circuit Breaker, Retry ë™ì‘ í™•ì¸
- [ ] **ì¥ì•  ëŒ€ì‘**: 4ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ í•´ê²°

### ğŸ¤ í˜‘ì—… í™œë™ ì²´í¬
- [ ] **ì•„í‚¤í…ì²˜ ì„¤ê³„**: Gateway ì „ëµ íŒ€ í† ë¡  ì°¸ì—¬
- [ ] **ì—­í•  ìˆ˜í–‰**: ë‹´ë‹¹ ì˜ì—­ êµ¬í˜„ ì™„ë£Œ
- [ ] **ì¥ì•  ëŒ€ì‘**: íŒ€ í˜‘ì—…ìœ¼ë¡œ ë¬¸ì œ í•´ê²°
- [ ] **ì§€ì‹ ê³µìœ **: í•™ìŠµ ë‚´ìš© ë° í•´ê²° ë°©ë²• ê³µìœ 

---

## ğŸ¯ ë‹¤ìŒ í•™ìŠµ ì¤€ë¹„

### ğŸ“– ì˜ˆìŠµ í‚¤ì›Œë“œ
- **Database per Service**: ì„œë¹„ìŠ¤ë³„ ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¦¬
- **Event Sourcing**: ì´ë²¤íŠ¸ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
- **CQRS**: Command Query Responsibility Segregation
- **Saga Pattern**: ë¶„ì‚° íŠ¸ëœì­ì…˜ ê´€ë¦¬

### ğŸ”§ í™˜ê²½ ì¤€ë¹„
```bash
# Gateway API CRDs ì„¤ì¹˜
kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.0.0/standard-install.yaml

# Gateway êµ¬í˜„ì²´ ì„ íƒ (íƒ 1)
# Option 1: Istio (ì¶”ì²œ)
istioctl install --set profile=minimal -y

# Option 2: Kong
kubectl apply -f https://bit.ly/kong-gateway-operator

# ê´€ì¸¡ì„± ë„êµ¬
kubectl apply -f https://bit.ly/prometheus-operator
kubectl apply -f https://bit.ly/grafana-operator
```

### ğŸ“š ì¶”ì²œ í•™ìŠµ ìë£Œ
- **[Gateway API Documentation](https://gateway-api.sigs.k8s.io/)**: ê³µì‹ ë¬¸ì„œ
- **[Gateway API Implementations](https://gateway-api.sigs.k8s.io/implementations/)**: êµ¬í˜„ì²´ ëª©ë¡
- **[Istio Gateway API](https://istio.io/latest/docs/tasks/traffic-management/ingress/gateway-api/)**: Istio ê°€ì´ë“œ
- **[Kong Gateway API](https://docs.konghq.com/kubernetes-ingress-controller/latest/guides/using-gateway-api/)**: Kong ê°€ì´ë“œ

---

## ğŸ’¡ í•™ìŠµ íšŒê³ 

### ğŸ¤ í˜ì–´ íšŒê³  (10ë¶„)
1. **ê¸°ìˆ  ì§„í™” ì´í•´**: ê° ê¸°ìˆ ì´ ë“±ì¥í•œ ë°°ê²½ì—ì„œ ê°€ì¥ ì¸ìƒ ê¹Šì—ˆë˜ ê²ƒì€?
2. **ì‹¤ìŠµ ê²½í—˜**: Kongê³¼ Istio ì¤‘ ì–´ë–¤ ê²ƒì´ ë” ìœ ìš©í–ˆë‚˜ìš”? ì™œ?
3. **ì¥ì•  ëŒ€ì‘**: Challengeì—ì„œ ê°€ì¥ ì–´ë ¤ì› ë˜ ì‹œë‚˜ë¦¬ì˜¤ì™€ í•´ê²° ë°©ë²•ì€?
4. **ì‹¤ë¬´ ì ìš©**: í˜„ì¬ ë˜ëŠ” ë¯¸ë˜ í”„ë¡œì íŠ¸ì— ì–´ë–¤ Gatewayë¥¼ ì„ íƒí•˜ì‹œê² ì–´ìš”?

### ğŸ“Š í•™ìŠµ ì„±ê³¼ ìê°€ í‰ê°€
**5ì  ì²™ë„ë¡œ í‰ê°€í•´ë³´ì„¸ìš”**:
- [ ] API Gateway ê°œë… ë° í•„ìš”ì„± ì´í•´: â­â­â­â­â­
- [ ] ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ íŒ¨í„´ ì´í•´: â­â­â­â­â­
- [ ] Kong/Istio êµ¬í˜„ ëŠ¥ë ¥: â­â­â­â­â­
- [ ] ì¥ì•  ëŒ€ì‘ ëŠ¥ë ¥: â­â­â­â­â­

### ğŸ¯ ê°œì„  í¬ì¸íŠ¸
- **ë” í•™ìŠµì´ í•„ìš”í•œ ë¶€ë¶„**: 
- **ë‹¤ìŒì— ì‹œë„í•´ë³¼ ê²ƒ**: 
- **íŒ€ì—ê²Œ ê³µìœ í•˜ê³  ì‹¶ì€ ê²ƒ**: 

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ğŸ”— ê³µì‹ ë¬¸ì„œ
- **[Gateway API](https://gateway-api.sigs.k8s.io/)**: Kubernetes Gateway API ê³µì‹ ë¬¸ì„œ
- **[Gateway API Spec](https://gateway-api.sigs.k8s.io/reference/spec/)**: API ìŠ¤í™ ìƒì„¸
- **[Istio](https://istio.io/)**: Istio Service Mesh
- **[Kong](https://docs.konghq.com/)**: Kong Gateway
- **[AWS Load Balancer Controller](https://kubernetes-sigs.github.io/aws-load-balancer-controller/)**: AWS Gateway API ì§€ì›

### ğŸ“– ì¶”ì²œ ë„ì„œ
- **Building Microservices** (Sam Newman) - Chapter 4: Integration
- **Microservices Patterns** (Chris Richardson) - API Gateway Pattern
- **Kubernetes Patterns** (Bilgin Ibryam) - Gateway Pattern

### ğŸ¥ ì¶”ì²œ ì˜ìƒ
- **[Gateway API Introduction](https://www.youtube.com/results?search_query=kubernetes+gateway+api)**: Gateway API ì†Œê°œ
- **[Istio Gateway API](https://www.youtube.com/results?search_query=istio+gateway+api)**: Istio êµ¬í˜„
- **[Netflix API Gateway Evolution](https://www.youtube.com/watch?v=CZ3wIuvmHeM)**: Netflix ì‚¬ë¡€

### ğŸŒ ê¸°ì—… ê¸°ìˆ  ë¸”ë¡œê·¸
- **[Kubernetes Blog - Gateway API](https://kubernetes.io/blog/2023/08/29/gateway-api-v0-8/)**: GA ë°œí‘œ
- **[Istio Blog](https://istio.io/latest/blog/)**: Istio ê¸°ìˆ  ë¸”ë¡œê·¸
- **[Kong Blog](https://konghq.com/blog)**: Kong ê¸°ìˆ  ë¸”ë¡œê·¸

---

<div align="center">

**ğŸŒ ë‹¨ì¼ ì§„ì…ì ** â€¢ **ğŸ” ë™ì  ë°œê²¬** â€¢ **âš–ï¸ ë˜‘ë˜‘í•œ ë¶„ì‚°** â€¢ **ğŸ›¡ï¸ íšŒë³µì„±**

*ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹ ì˜ ì§„í™”, í•¨ê»˜ ê²½í—˜í•©ë‹ˆë‹¤*

</div>
