# November Week 2 Day 2 Session 1: API Gateway

<div align="center">

**ğŸšª ë¬¸ì§€ê¸°** â€¢ **ğŸ” ì‹ ë¶„ì¦ í™•ì¸** â€¢ **ğŸ“ ì „í™” êµí™˜ì›**

*Lambda í•¨ìˆ˜ë¥¼ ì¸í„°ë„·ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¬¸ì§€ê¸°*

</div>

---

## ğŸ•˜ Session ì •ë³´
**ì‹œê°„**: 09:00-09:40 (40ë¶„)
**ëª©í‘œ**: API Gatewayê°€ ë­”ì§€, ì™œ í•„ìš”í•œì§€ ì‰½ê²Œ ì´í•´í•˜ê¸°
**ë°©ì‹**: ì‹¤ìƒí™œ ë¹„ìœ  + ê·¸ë¦¼ + ê°„ë‹¨í•œ ì˜ˆì‹œ

## ğŸ¯ í•™ìŠµ ëª©í‘œ

### ğŸ“š ì´í•´ ëª©í‘œ
- API Gatewayê°€ ë­”ì§€ ì•Œê¸° (ë¬¸ì§€ê¸° ê°™ì€ ê±°!)
- ì™œ í•„ìš”í•œì§€ ì´í•´í•˜ê¸° (Lambdaë¥¼ ì¸í„°ë„·ì— ì—°ê²°)
- ë‘ ê°€ì§€ ì¢…ë¥˜ ì•Œê¸° (ê¸°ëŠ¥ ë§ì€ ê²ƒ vs ì €ë ´í•œ ê²ƒ)
- Lambdaì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì•Œê¸°

### ğŸ› ï¸ ì ìš© ëª©í‘œ
- ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ íŒë‹¨í•˜ê¸°
- ì–´ë–¤ ì¢…ë¥˜ë¥¼ ì„ íƒí• ì§€ ì•Œê¸°
- Lambdaì™€ ì—°ê²°í•˜ëŠ” ë°©ë²• ì•Œê¸°

---

## ğŸ¤” ì™œ í•„ìš”í•œê°€? (5ë¶„)

### ğŸ  ì‹¤ìƒí™œ ë¹„ìœ  1: ì•„íŒŒíŠ¸ ê²½ë¹„ì‹¤

**ê²½ë¹„ì‹¤ ì—†ì´ ë°©ë¬¸í•˜ê¸°** (ìœ„í—˜í•´ìš”):
```
ì™¸ë¶€ ì‚¬ëŒ â†’ ë°”ë¡œ ì§‘ ë¬¸ ë‘ë“œë¦¬ê¸°
    â†“
ë¬¸ì œì :
- ëˆ„ê°€ ì˜¤ëŠ”ì§€ ëª¨ë¦„ ğŸ˜±
- ìœ„í—˜í•œ ì‚¬ëŒë„ ì˜¬ ìˆ˜ ìˆìŒ
- ëª‡ ëª…ì´ ì™”ëŠ”ì§€ ê¸°ë¡ ì—†ìŒ
```

**ê²½ë¹„ì‹¤ ìˆëŠ” ì•„íŒŒíŠ¸** (ì•ˆì „í•´ìš”):
```
ì™¸ë¶€ ì‚¬ëŒ â†’ ê²½ë¹„ì‹¤ (ì‹ ë¶„ì¦ í™•ì¸)
    â†“
1. ì‹ ë¶„ì¦ í™•ì¸ (ì¸ì¦)
2. ë°©ë¬¸ ëª©ì  í™•ì¸ (ì¸ê°€)
3. ë°©ë¬¸ ê¸°ë¡ ì‘ì„± (ë¡œê·¸)
4. ì§‘ìœ¼ë¡œ ì•ˆë‚´
    â†“
ì•ˆì „í•˜ê³  ê¸°ë¡ë„ ë‚¨ì•„ìš” âœ…
```

### ğŸ  ì‹¤ìƒí™œ ë¹„ìœ  2: ì „í™” êµí™˜ì›

**ì˜›ë‚  ì „í™” (êµí™˜ì› ìˆìŒ)**:
```
ì „í™” ê±¸ê¸° â†’ êµí™˜ì› â†’ "ëª‡ ë²ˆìœ¼ë¡œ ì—°ê²°í•´ë“œë¦´ê¹Œìš”?"
    â†“
êµí™˜ì›ì´ í•˜ëŠ” ì¼:
- ì „í™”ë²ˆí˜¸ í™•ì¸
- ì—°ê²°í•´ì£¼ê¸°
- í†µí™” ê¸°ë¡
- ì˜ëª»ëœ ë²ˆí˜¸ ì°¨ë‹¨
```

**API Gateway = ì „í™” êµí™˜ì›**:
```
ì¸í„°ë„· ìš”ì²­ â†’ API Gateway â†’ "ì–´ëŠ Lambdaë¡œ ì—°ê²°í• ê¹Œìš”?"
    â†“
API Gatewayê°€ í•˜ëŠ” ì¼:
- ì‹ ë¶„ í™•ì¸ (ë¡œê·¸ì¸í–ˆë‚˜ìš”?)
- Lambda ì—°ê²°í•´ì£¼ê¸°
- ìš”ì²­ ê¸°ë¡
- ì´ìƒí•œ ìš”ì²­ ì°¨ë‹¨
```

### ğŸ’¼ ì‹¤ì œ ì˜ˆì‹œ: Lambda í•¨ìˆ˜ ì‚¬ìš©í•˜ê¸°

**ë¬¸ì œ ìƒí™© - Lambdaë§Œ ìˆì„ ë•Œ**:
```
Lambda í•¨ìˆ˜ (ì£¼ë¬¸ ì²˜ë¦¬ ì½”ë“œ)
    â†“
ì–´ë–»ê²Œ ì¸í„°ë„·ì—ì„œ ì‚¬ìš©í• ê¹Œ?
- LambdaëŠ” AWS ì•ˆì—ë§Œ ìˆì–´ìš”
- ì¸í„°ë„·ì—ì„œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€
- URLì´ ì—†ì–´ìš”
- ëˆ„ê°€ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸ ë¶ˆê°€
```

**í•´ê²° - API Gateway ì‚¬ìš©**:
```
ì¸í„°ë„· â†’ API Gateway (ë¬¸ì§€ê¸°) â†’ Lambda í•¨ìˆ˜
         â†“
API Gatewayê°€ í•´ì£¼ëŠ” ì¼:
1. URL ë§Œë“¤ì–´ì£¼ê¸° (https://xxx.amazonaws.com/prod/order)
2. ì‹ ë¶„ í™•ì¸ (ë¡œê·¸ì¸í•œ ì‚¬ëŒë§Œ)
3. Lambda ì—°ê²°í•´ì£¼ê¸°
4. ê¸°ë¡ ë‚¨ê¸°ê¸°
```

**ê·¸ë¦¼ìœ¼ë¡œ ë³´ê¸°**:
```mermaid
graph TB
    subgraph "Lambdaë§Œ ìˆì„ ë•Œ (ì‚¬ìš© ë¶ˆê°€)"
        A1[ì¸í„°ë„·] -.->|ì ‘ê·¼ ë¶ˆê°€| A2[Lambda<br/>AWS ì•ˆì—ë§Œ ìˆìŒ]
    end
    
    subgraph "API Gateway ì‚¬ìš© (ì‚¬ìš© ê°€ëŠ¥)"
        B1[ì¸í„°ë„·] -->|URLë¡œ ì ‘ê·¼| B2[API Gateway<br/>ë¬¸ì§€ê¸°]
        B2 -->|ì‹ ë¶„ í™•ì¸ í›„| B3[Lambda<br/>ì£¼ë¬¸ ì²˜ë¦¬]
    end
    
    style A1 fill:#ffebee
    style A2 fill:#ffebee
    style B1 fill:#e3f2fd
    style B2 fill:#fff3e0
    style B3 fill:#e8f5e8
```

### ğŸ¯ API Gatewayì˜ ì—­í• 

1. **ë¬¸ ë§Œë“¤ì–´ì£¼ê¸°**: Lambdaì— URL ì£¼ì†Œ ë§Œë“¤ê¸°
2. **ì‹ ë¶„ í™•ì¸**: ë¡œê·¸ì¸í•œ ì‚¬ëŒë§Œ ë“¤ì–´ì˜¤ê²Œ
3. **êµí†µ ì •ë¦¬**: ë„ˆë¬´ ë§ì€ ìš”ì²­ ë§‰ê¸°
4. **ê¸°ë¡ ë‚¨ê¸°ê¸°**: ëˆ„ê°€ ì–¸ì œ ì™”ëŠ”ì§€ ê¸°ë¡

---

## ğŸ“– í•µì‹¬ ê°œë… (30ë¶„)

### ğŸ” ê°œë… 1: API Gatewayê°€ ë­”ê°€ìš”? (10ë¶„)

> **ì‰½ê²Œ ë§í•˜ë©´**: Lambda í•¨ìˆ˜ë¥¼ ì¸í„°ë„·ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” "ë¬¸ì§€ê¸°"

**ë“±ì¥ì¸ë¬¼**:
- **ì‚¬ìš©ì**: ì¸í„°ë„·ì—ì„œ ìš”ì²­í•˜ëŠ” ì‚¬ëŒ (ì›¹ì‚¬ì´íŠ¸, ì•±)
- **API Gateway**: ë¬¸ì§€ê¸° (ì‹ ë¶„ í™•ì¸, ì•ˆë‚´)
- **Lambda í•¨ìˆ˜**: ì¼í•˜ëŠ” ë¡œë´‡ (ì£¼ë¬¸ ì²˜ë¦¬, ê³„ì‚° ë“±)

**ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?**:
```mermaid
sequenceDiagram
    participant ì‚¬ìš©ì
    participant ë¬¸ì§€ê¸°
    participant Lambdaë¡œë´‡
    
    ì‚¬ìš©ì->>ë¬¸ì§€ê¸°: 1. ì£¼ë¬¸í•˜ê³  ì‹¶ì–´ìš”!
    ë¬¸ì§€ê¸°->>ë¬¸ì§€ê¸°: 2. ì‹ ë¶„ì¦ í™•ì¸
    ë¬¸ì§€ê¸°->>Lambdaë¡œë´‡: 3. ì£¼ë¬¸ ì²˜ë¦¬í•´ì£¼ì„¸ìš”
    Lambdaë¡œë´‡->>Lambdaë¡œë´‡: 4. ì£¼ë¬¸ ì²˜ë¦¬ ì¤‘...
    Lambdaë¡œë´‡->>ë¬¸ì§€ê¸°: 5. ì²˜ë¦¬ ì™„ë£Œ!
    ë¬¸ì§€ê¸°->>ì‚¬ìš©ì: 6. ì£¼ë¬¸ ì™„ë£Œë˜ì—ˆì–´ìš”
```

**ì‹¤ìƒí™œ ì˜ˆì‹œ**:
```
ë†€ì´ê³µì› ì…êµ¬:
1. ì‚¬ëŒë“¤: ë†€ì´ê³µì› ê°€ê³  ì‹¶ì–´ìš” (ì‚¬ìš©ì)
2. ì…êµ¬ ì§ì›: í‹°ì¼“ í™•ì¸í•´ìš” (API Gateway)
3. ë†€ì´ê¸°êµ¬: ì‚¬ëŒë“¤ì´ íƒ‘ë‹ˆë‹¤ (Lambda)
```

**API Gatewayê°€ í•˜ëŠ” ì¼**:

**1. URL ì£¼ì†Œ ë§Œë“¤ê¸°** (ë¬¸ ë§Œë“¤ê¸°):
```
Lambdaë§Œ ìˆì„ ë•Œ:
- ì£¼ì†Œ ì—†ìŒ âŒ
- ì¸í„°ë„·ì—ì„œ ì ‘ê·¼ ë¶ˆê°€

API Gateway ì¶”ê°€í•˜ë©´:
- https://abc123.execute-api.ap-northeast-2.amazonaws.com/prod/order
- ì´ ì£¼ì†Œë¡œ ì ‘ê·¼ ê°€ëŠ¥ âœ…
```

**2. ì‹ ë¶„ í™•ì¸í•˜ê¸°** (ê²½ë¹„):
```
ëˆ„ê°€ ì™”ë‚˜ìš”?
- ë¡œê·¸ì¸í•œ ì‚¬ëŒ? âœ… ë“¤ì–´ì˜¤ì„¸ìš”
- ë¡œê·¸ì¸ ì•ˆ í•œ ì‚¬ëŒ? âŒ ì•ˆ ë¼ìš”
```

**3. Lambda ì—°ê²°í•˜ê¸°** (ì•ˆë‚´):
```
ì–´ë””ë¡œ ê°ˆê¹Œìš”?
- /order â†’ ì£¼ë¬¸ Lambda
- /payment â†’ ê²°ì œ Lambda
- /user â†’ ì‚¬ìš©ì Lambda
```

**4. ê¸°ë¡ ë‚¨ê¸°ê¸°** (ë°©ëª…ë¡):
```
ëˆ„ê°€ ì–¸ì œ ì™”ë‚˜ìš”?
- 2024-11-07 15:00 - í™ê¸¸ë™ - ì£¼ë¬¸
- 2024-11-07 15:01 - ê¹€ì² ìˆ˜ - ê²°ì œ
```

**ê·¸ë¦¼ìœ¼ë¡œ ë³´ê¸°**:
```mermaid
graph TB
    User[ì‚¬ìš©ì<br/>ì›¹/ì•±] --> APIGW[API Gateway<br/>ë¬¸ì§€ê¸°]
    
    APIGW --> Check{ì‹ ë¶„ì¦<br/>í™•ì¸}
    Check -->|ìˆì–´ìš”| Route[ì–´ë””ë¡œ<br/>ê°ˆê¹Œìš”?]
    Check -->|ì—†ì–´ìš”| Reject[âŒ ì•ˆ ë¼ìš”]
    
    Route --> L1[Lambda 1<br/>ì£¼ë¬¸]
    Route --> L2[Lambda 2<br/>ê²°ì œ]
    Route --> L3[Lambda 3<br/>ì‚¬ìš©ì]
    
    L1 --> Response[ê²°ê³¼<br/>ëŒë ¤ì£¼ê¸°]
    L2 --> Response
    L3 --> Response
    
    Response --> User
    
    style User fill:#e3f2fd
    style APIGW fill:#fff3e0
    style Check fill:#f3e5f5
    style L1 fill:#e8f5e8
    style L2 fill:#e8f5e8
    style L3 fill:#e8f5e8
```

### ğŸ” ê°œë… 2: ë‘ ê°€ì§€ ì¢…ë¥˜ (10ë¶„)

> **ì‰½ê²Œ ë§í•˜ë©´**: ê¸°ëŠ¥ ë§ì€ ê²ƒ vs ì €ë ´í•œ ê²ƒ

#### ì¢…ë¥˜ 1: REST API (ê¸°ëŠ¥ ë§ìŒ)

**íŠ¹ì§•**:
- ğŸ **ê¸°ëŠ¥ì´ ë§ì•„ìš”**: ì—¬ëŸ¬ ê°€ì§€ í•  ìˆ˜ ìˆì–´ìš”
- ğŸ’° **ì¡°ê¸ˆ ë¹„ì‹¸ìš”**: ê¸°ëŠ¥ì´ ë§ìœ¼ë‹ˆê¹Œìš”
- ğŸ¢ **íšŒì‚¬ì—ì„œ ë§ì´ ì¨ìš”**: ì•ˆì „í•˜ê³  ê¸°ëŠ¥ ë§ì•„ì„œ

**í•  ìˆ˜ ìˆëŠ” ì¼**:
- API Keyë¡œ ê´€ë¦¬ (ëˆ„ê°€ ì–¼ë§ˆë‚˜ ì“°ëŠ”ì§€)
- ìºì‹± (ë¹ ë¥´ê²Œ ì‘ë‹µ)
- ë³µì¡í•œ ì¸ì¦ (ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ í™•ì¸)

**ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?**:
- í° íšŒì‚¬ ì‹œìŠ¤í…œ
- ë³´ì•ˆì´ ì¤‘ìš”í•  ë•Œ
- ë§ì€ ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ

**ë¹„ìœ **:
```
ê³ ê¸‰ ì•„íŒŒíŠ¸:
- ê²½ë¹„ì‹¤ 24ì‹œê°„ (API Key ê´€ë¦¬)
- CCTV ë§ìŒ (ëª¨ë‹ˆí„°ë§)
- ì£¼ì°¨ì¥ ë„“ìŒ (ìºì‹±)
â†’ ê´€ë¦¬ë¹„ ë¹„ì‹¸ì§€ë§Œ í¸í•´ìš”
```

#### ì¢…ë¥˜ 2: HTTP API (ì €ë ´í•¨)

**íŠ¹ì§•**:
- ğŸ’µ **ì—„ì²­ ì €ë ´í•´ìš”**: REST APIë³´ë‹¤ 70% ì‹¸ìš”!
- âš¡ **ë¹¨ë¼ìš”**: ê¸°ëŠ¥ì´ ì ì–´ì„œ ë¹ ë¦„
- ğŸ¯ **ê°„ë‹¨í•´ìš”**: ë³µì¡í•œ ê¸°ëŠ¥ ì—†ìŒ

**í•  ìˆ˜ ìˆëŠ” ì¼**:
- Lambda ì—°ê²° (ê¸°ë³¸)
- ë¡œê·¸ì¸ í™•ì¸ (ê¸°ë³¸)
- ë¹ ë¥¸ ì‘ë‹µ

**ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?**:
- ì‘ì€ í”„ë¡œì íŠ¸
- ë¹„ìš© ì ˆì•½í•˜ê³  ì‹¶ì„ ë•Œ
- ê°„ë‹¨í•œ APIë©´ ì¶©ë¶„í•  ë•Œ

**ë¹„ìœ **:
```
ì›ë£¸:
- ê²½ë¹„ ì—†ìŒ (ê¸°ë³¸ ê¸°ëŠ¥ë§Œ)
- ì£¼ì°¨ ì œí•œì 
- ê´€ë¦¬ë¹„ ì €ë ´
â†’ ì €ë ´í•˜ê³  ê°„ë‹¨í•´ìš”
```

#### ë¹„êµí‘œ (ì‰½ê²Œ ì´í•´í•˜ê¸°)

| ë¹„êµ | REST API<br/>(ê³ ê¸‰ ì•„íŒŒíŠ¸) | HTTP API<br/>(ì›ë£¸) |
|------|---------------------------|---------------------|
| **ê°€ê²©** | ë¹„ì‹¸ìš” ğŸ’°ğŸ’°ğŸ’° | ì €ë ´í•´ìš” ğŸ’° |
| **ê¸°ëŠ¥** | ë§ì•„ìš” ğŸğŸğŸ | ê¸°ë³¸ë§Œ ğŸ |
| **ì†ë„** | ë³´í†µ ğŸš— | ë¹¨ë¼ìš” ğŸš€ |
| **ì‚¬ìš©** | í° íšŒì‚¬ ğŸ¢ | ì‘ì€ í”„ë¡œì íŠ¸ ğŸ  |

**ê·¸ë¦¼ìœ¼ë¡œ ë³´ê¸°**:
```mermaid
graph TB
    subgraph "REST API (ê¸°ëŠ¥ ë§ìŒ)"
        R1[API Key ê´€ë¦¬]
        R2[ìºì‹±]
        R3[ë³µì¡í•œ ì¸ì¦]
        R4[ë§ì€ ì„¤ì •]
    end
    
    subgraph "HTTP API (ê°„ë‹¨í•¨)"
        H1[Lambda ì—°ê²°]
        H2[ê¸°ë³¸ ì¸ì¦]
        H3[ë¹ ë¥¸ ì†ë„]
    end
    
    R1 --> Cost1[ë¹„ìš©: ğŸ’°ğŸ’°ğŸ’°]
    H1 --> Cost2[ë¹„ìš©: ğŸ’°]
    
    style R1 fill:#fff3e0
    style R2 fill:#fff3e0
    style R3 fill:#fff3e0
    style R4 fill:#fff3e0
    style H1 fill:#e8f5e8
    style H2 fill:#e8f5e8
    style H3 fill:#e8f5e8
    style Cost1 fill:#ffebee
    style Cost2 fill:#e8f5e8
```

### ğŸ” ê°œë… 3: Lambdaì™€ ì—°ê²°í•˜ê¸° (10ë¶„)

> **ì‰½ê²Œ ë§í•˜ë©´**: ë¬¸ì§€ê¸°(API Gateway)ì™€ ì¼ê¾¼(Lambda)ì„ ì—°ê²°í•˜ê¸°

**ì—°ê²° ê³¼ì •**:

**Step 1: Lambda í•¨ìˆ˜ ë§Œë“¤ê¸°** (ì¼ê¾¼ ê³ ìš©):
```python
# Lambda í•¨ìˆ˜ (ì£¼ë¬¸ ì²˜ë¦¬ ë¡œë´‡)
def lambda_handler(event, context):
    # ì£¼ë¬¸ ì •ë³´ ë°›ê¸°
    order = event['body']
    
    # ì£¼ë¬¸ ì²˜ë¦¬í•˜ê¸°
    result = "ì£¼ë¬¸ ì™„ë£Œ!"
    
    # ê²°ê³¼ ëŒë ¤ì£¼ê¸°
    return {
        'statusCode': 200,
        'body': result
    }
```

**Step 2: API Gateway ë§Œë“¤ê¸°** (ë¬¸ì§€ê¸° ë°°ì¹˜):
```
AWS Console â†’ API Gateway â†’ Create API
    â†“
HTTP API ì„ íƒ (ì €ë ´í•œ ê²ƒ)
    â†“
ì´ë¦„: my-order-api
```

**Step 3: Lambda ì—°ê²°í•˜ê¸°** (ì¼ê¾¼ê³¼ ë¬¸ì§€ê¸° ì—°ê²°):
```
API Gateway â†’ Routes â†’ Create
    â†“
ê²½ë¡œ: POST /order
    â†“
ì—°ê²°: Lambda í•¨ìˆ˜ ì„ íƒ
```

**ì™„ì„±!**:
```
ì´ì œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”:
https://abc123.execute-api.ap-northeast-2.amazonaws.com/order
    â†“
ì´ ì£¼ì†Œë¡œ ì£¼ë¬¸í•˜ë©´
    â†“
Lambdaê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ìš”!
```

**ê·¸ë¦¼ìœ¼ë¡œ ë³´ê¸°**:
```mermaid
graph LR
    A[1. Lambda<br/>ë§Œë“¤ê¸°] --> B[2. API Gateway<br/>ë§Œë“¤ê¸°]
    B --> C[3. ì—°ê²°í•˜ê¸°]
    C --> D[4. ì™„ì„±!<br/>URL ìƒì„±]
    
    D --> E[ì‚¬ìš©ìê°€<br/>URLë¡œ ì ‘ê·¼]
    E --> F[Lambdaê°€<br/>ìë™ ì‹¤í–‰]
    
    style A fill:#e8f5e8
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e3f2fd
    style E fill:#ffebee
    style F fill:#e8f5e8
```

---

## ğŸ’­ í•¨ê»˜ ìƒê°í•´ë³´ê¸° (5ë¶„)

### ğŸ¤ í˜ì–´ í† ë¡  (3ë¶„)

**í† ë¡  ì£¼ì œ**:
1. "ìš°ë¦¬ ì§‘ ì•„íŒŒíŠ¸ ê²½ë¹„ì‹¤ì€ ì–´ë–¤ ì¼ì„ í•˜ë‚˜ìš”?"
2. "API Gatewayê°€ ì—†ìœ¼ë©´ ì–´ë–¤ ë¬¸ì œê°€ ìƒê¸¸ê¹Œìš”?"
3. "REST APIì™€ HTTP API ì¤‘ ì–´ë–¤ ê±¸ ì„ íƒí• ê¹Œìš”?"

**í˜ì–´ í™œë™ ê°€ì´ë“œ**:
- ğŸ‘¥ ì˜† ì‚¬ëŒê³¼ ì´ì•¼ê¸°í•˜ê¸°
- ğŸ”„ ê°ì 1ë¶„ì”© ì„¤ëª…í•˜ê¸°
- ğŸ“ ì¤‘ìš”í•œ ì  ë©”ëª¨í•˜ê¸°

### ğŸ¯ ì „ì²´ ê³µìœ  (2ë¶„)

**ì§ˆë¬¸**:
- "API Gatewayë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•˜ë©´?"
- "REST APIì™€ HTTP APIì˜ ê°€ì¥ í° ì°¨ì´ëŠ”?"

### ğŸ’¡ ì´í•´ë„ ì²´í¬ ì§ˆë¬¸

- âœ… "API Gatewayê°€ ë­í•˜ëŠ” ê±´ì§€ ì„¤ëª…í•  ìˆ˜ ìˆë‚˜ìš”?"
- âœ… "Lambdaì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì•Œê² ë‚˜ìš”?"
- âœ… "ì–¸ì œ REST APIë¥¼ ì“°ê³  ì–¸ì œ HTTP APIë¥¼ ì“¸ê¹Œìš”?"

---

## ğŸ”‘ í•µì‹¬ í‚¤ì›Œë“œ

**ìƒˆë¡œìš´ ìš©ì–´** (ì‰½ê²Œ ì„¤ëª…):
- **API Gateway**: Lambdaë¥¼ ì¸í„°ë„·ì— ì—°ê²°í•´ì£¼ëŠ” ë¬¸ì§€ê¸°
- **REST API**: ê¸°ëŠ¥ ë§ì€ API (ë¹„ì‹¸ì§€ë§Œ ì¢‹ìŒ)
- **HTTP API**: ê°„ë‹¨í•œ API (ì €ë ´í•˜ê³  ë¹ ë¦„)
- **Lambda í†µí•©**: Lambdaì™€ API Gateway ì—°ê²°í•˜ê¸°
- **URL**: ì¸í„°ë„· ì£¼ì†Œ (ì§‘ ì£¼ì†Œ ê°™ì€ ê²ƒ)

**ì¤‘ìš” ê°œë…**:
- **ë¬¸ì§€ê¸° ì—­í• **: ì‹ ë¶„ í™•ì¸, ì•ˆë‚´, ê¸°ë¡
- **ë‘ ê°€ì§€ ì¢…ë¥˜**: ê¸°ëŠ¥ ë§ìŒ vs ì €ë ´í•¨
- **Lambda ì—°ê²°**: ë¬¸ì§€ê¸°ì™€ ì¼ê¾¼ ì—°ê²°

---

## ğŸ“ Session ë§ˆë¬´ë¦¬

### âœ… ì˜¤ëŠ˜ Session ì„±ê³¼
- [ ] API Gatewayê°€ ë­”ì§€ ì´í•´í–ˆì–´ìš”
- [ ] ì™œ í•„ìš”í•œì§€ ì•Œì•˜ì–´ìš”
- [ ] REST APIì™€ HTTP API ì°¨ì´ë¥¼ ì•Œì•˜ì–´ìš”
- [ ] Lambdaì™€ ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ ì•Œì•˜ì–´ìš”

### ğŸ¯ ë‹¤ìŒ Session ì¤€ë¹„
- **Session 2**: Cognito (ë¡œê·¸ì¸ ì‹œìŠ¤í…œ)
- **ì—°ê²°**: API Gatewayì—ì„œ ë¡œê·¸ì¸ í™•ì¸í•˜ëŠ” ë°©ë²•
- **ì¤€ë¹„**: ë¡œê·¸ì¸ì´ ì™œ í•„ìš”í•œì§€ ìƒê°í•´ë³´ê¸°

**ì£¼ìš” ê¸°ëŠ¥**:
1. **API ìƒì„± ë° ë°°í¬**: REST/HTTP/WebSocket API ì§€ì›
2. **ë°±ì—”ë“œ í†µí•©**: Lambda, HTTP ì—”ë“œí¬ì¸íŠ¸, AWS ì„œë¹„ìŠ¤
3. **ì¸ì¦/ì¸ê°€**: API Key, IAM, Cognito, Lambda Authorizer
4. **íŠ¸ë˜í”½ ê´€ë¦¬**: Throttling, Rate Limiting, Caching
5. **ëª¨ë‹ˆí„°ë§**: CloudWatch ìë™ í†µí•©

**API Gateway ì•„í‚¤í…ì²˜**:

![API Gateway Architecture](./generated-diagrams/api_gateway_architecture.png)

*ê·¸ë¦¼: API Gateway ê¸°ë³¸ ì•„í‚¤í…ì²˜ - í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ Lambda í•¨ìˆ˜ë¡œ ë¼ìš°íŒ…í•˜ê³  DynamoDBì™€ ì—°ë™*

**ìƒì„¸ íë¦„**:

```mermaid
graph TB
    Client[í´ë¼ì´ì–¸íŠ¸<br/>ì›¹/ëª¨ë°”ì¼] --> APIGW[API Gateway]
    
    APIGW --> Auth{ì¸ì¦/ì¸ê°€}
    Auth -->|ì„±ê³µ| Route[ë¼ìš°íŒ…]
    Auth -->|ì‹¤íŒ¨| Reject[403 Forbidden]
    
    Route --> Lambda[Lambda í•¨ìˆ˜]
    Route --> HTTP[HTTP ë°±ì—”ë“œ]
    Route --> AWS[AWS ì„œë¹„ìŠ¤<br/>DynamoDB, S3]
    
    Lambda --> Response[ì‘ë‹µ ë³€í™˜]
    HTTP --> Response
    AWS --> Response
    
    Response --> Cache{ìºì‹œ?}
    Cache -->|ìˆìŒ| Client
    Cache -->|ì—†ìŒ| Client
    
    APIGW --> CW[CloudWatch<br/>ë¡œê·¸/ë©”íŠ¸ë¦­]
    
    style Client fill:#e3f2fd
    style APIGW fill:#fff3e0
    style Auth fill:#f3e5f5
    style Lambda fill:#e8f5e8
    style CW fill:#ffebee
```

**í•µì‹¬ êµ¬ì„± ìš”ì†Œ** (AWS ê³µì‹ ë¬¸ì„œ):

1. **API Endpoint**:
   - **Edge-Optimized**: CloudFront í†µí•´ ê¸€ë¡œë²Œ ë°°í¬ (ê¸°ë³¸ê°’)
   - **Regional**: íŠ¹ì • ë¦¬ì „ì—ë§Œ ë°°í¬
   - **Private**: VPC ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼

2. **Resource & Method**:
   - **Resource**: API ê²½ë¡œ (ì˜ˆ: `/users`, `/orders`)
   - **Method**: HTTP ë™ì‚¬ (GET, POST, PUT, DELETE)

3. **Integration**:
   - **Lambda**: Lambda í•¨ìˆ˜ í˜¸ì¶œ
   - **HTTP**: HTTP ì—”ë“œí¬ì¸íŠ¸ í”„ë¡ì‹œ
   - **AWS Service**: DynamoDB, S3 ë“± ì§ì ‘ í˜¸ì¶œ
   - **Mock**: í…ŒìŠ¤íŠ¸ìš© ê°€ì§œ ì‘ë‹µ

4. **Stage**:
   - **í™˜ê²½ ë¶„ë¦¬**: dev, staging, prod
   - **ë²„ì „ ê´€ë¦¬**: v1, v2
   - **Stage Variables**: í™˜ê²½ë³„ ì„¤ì •

### ğŸ” ê°œë… 2: REST API vs HTTP API (10ë¶„)

> **AWS ê³µì‹**: API GatewayëŠ” ë‘ ê°€ì§€ API íƒ€ì…ì„ ì œê³µí•˜ë©°, ê°ê° ë‹¤ë¥¸ ê¸°ëŠ¥ê³¼ ê°€ê²©ì„ ê°€ì§‘ë‹ˆë‹¤.

#### REST API (ê¸°ëŠ¥ ì¤‘ì‹¬)

**íŠ¹ì§•**:
- **í’ë¶€í•œ ê¸°ëŠ¥**: API Key, Usage Plans, Request Validation
- **ê³ ê¸‰ í†µí•©**: VTL ë³€í™˜, Mock Integration
- **ìºì‹±**: ì‘ë‹µ ìºì‹± ì§€ì›
- **Private API**: VPC ë‚´ë¶€ ì „ìš© API

**ì‚¬ìš© ì‚¬ë¡€**:
- ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ API
- ë³µì¡í•œ ì¸ì¦/ì¸ê°€ ìš”êµ¬ì‚¬í•­
- API ì‚¬ìš©ëŸ‰ ì œì–´ í•„ìš”
- ì‘ë‹µ ìºì‹± í•„ìš”

**ê°€ê²©** (ap-northeast-2):
- **ì²« 3ì–µ 3ì²œë§Œ í˜¸ì¶œ**: $4.25/ë°±ë§Œ í˜¸ì¶œ
- **ë‹¤ìŒ 6ì–µ 6ì²œ 7ë°±ë§Œ í˜¸ì¶œ**: $3.53/ë°±ë§Œ í˜¸ì¶œ
- **10ì–µ í˜¸ì¶œ ì´ˆê³¼**: $2.97/ë°±ë§Œ í˜¸ì¶œ
- **ìºì‹±**: $0.02/ì‹œê°„ (0.5GB ìºì‹œ)

#### HTTP API (ë¹„ìš© ì¤‘ì‹¬)

**íŠ¹ì§•**:
- **ì €ë ´í•œ ê°€ê²©**: REST API ëŒ€ë¹„ 70% ì €ë ´
- **ë¹ ë¥¸ ì„±ëŠ¥**: ë‚®ì€ ì§€ì—°ì‹œê°„
- **ê°„ë‹¨í•œ ì„¤ì •**: ìµœì†Œ ê¸°ëŠ¥
- **JWT ë„¤ì´í‹°ë¸Œ**: Cognito, Auth0 í†µí•©

**ì‚¬ìš© ì‚¬ë¡€**:
- ì„œë²„ë¦¬ìŠ¤ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ API
- ë¹„ìš© ìµœì í™” ìš°ì„ 
- ê°„ë‹¨í•œ ì¸ì¦ë§Œ í•„ìš”

**ê°€ê²©** (ap-northeast-2):
- **ì²« 3ì–µ í˜¸ì¶œ**: $1.29/ë°±ë§Œ í˜¸ì¶œ
- **ë‹¤ìŒ 7ì–µ í˜¸ì¶œ**: $1.03/ë°±ë§Œ í˜¸ì¶œ
- **10ì–µ í˜¸ì¶œ ì´ˆê³¼**: $0.52/ë°±ë§Œ í˜¸ì¶œ

#### ë¹„êµí‘œ

| ê¸°ëŠ¥ | REST API | HTTP API |
|------|----------|----------|
| **ê°€ê²©** | $4.25/ë°±ë§Œ | $1.29/ë°±ë§Œ (70% ì €ë ´) |
| **ì„±ëŠ¥** | ë³´í†µ | ë¹ ë¦„ (60% ë‚®ì€ ì§€ì—°) |
| **API Key** | âœ… | âŒ |
| **Usage Plans** | âœ… | âŒ |
| **Request Validation** | âœ… | âŒ |
| **Response Caching** | âœ… | âŒ |
| **Private API** | âœ… | âŒ |
| **JWT ì¸ì¦** | Lambda Authorizer | âœ… ë„¤ì´í‹°ë¸Œ |
| **CORS** | ìˆ˜ë™ ì„¤ì • | âœ… ìë™ |
| **WebSocket** | âœ… | âŒ |

**ì„ íƒ ê¸°ì¤€**:
```mermaid
graph TB
    A{API ìš”êµ¬ì‚¬í•­}
    A -->|ë¹„ìš© ìµœì í™”| B[HTTP API]
    A -->|ê³ ê¸‰ ê¸°ëŠ¥ í•„ìš”| C{ì–´ë–¤ ê¸°ëŠ¥?}
    
    C -->|API Key, Usage Plans| D[REST API]
    C -->|ìºì‹±| D
    C -->|Private API| D
    C -->|Request Validation| D
    
    B --> E[JWT ì¸ì¦ë§Œ í•„ìš”]
    B --> F[ê°„ë‹¨í•œ Lambda í†µí•©]
    
    style A fill:#fff3e0
    style B fill:#e8f5e8
    style C fill:#f3e5f5
    style D fill:#e3f2fd
    style E fill:#e8f5e8
    style F fill:#e8f5e8
```

### ğŸ” ê°œë… 3: Lambda í†µí•© ë° ì¸ì¦ (10ë¶„)

#### Lambda í†µí•© ë°©ì‹

![API Gateway Lambda Integration](./generated-diagrams/api_gateway_lambda_simple.png)

*ê·¸ë¦¼: API Gatewayì™€ Lambda í†µí•© - ì„œë²„ë¦¬ìŠ¤ API êµ¬í˜„ì˜ í•µì‹¬ íŒ¨í„´*

**1. Lambda Proxy Integration** (ê¶Œì¥):
```json
// API Gatewayê°€ Lambdaì— ì „ë‹¬í•˜ëŠ” ì´ë²¤íŠ¸
{
  "httpMethod": "POST",
  "path": "/users",
  "headers": {
    "Authorization": "Bearer token..."
  },
  "body": "{\"name\":\"John\"}",
  "queryStringParameters": {
    "page": "1"
  }
}
```

**Lambda í•¨ìˆ˜ ì˜ˆì‹œ**:
```python
def lambda_handler(event, context):
    # API Gateway ì´ë²¤íŠ¸ íŒŒì‹±
    http_method = event['httpMethod']
    path = event['path']
    body = json.loads(event['body'])
    
    # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    if http_method == 'POST' and path == '/users':
        user = create_user(body)
        
        # API Gateway ì‘ë‹µ í˜•ì‹
        return {
            'statusCode': 201,
            'headers': {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
            'body': json.dumps(user)
        }
```

**2. Lambda Custom Integration**:
- ìš”ì²­/ì‘ë‹µ ë³€í™˜ í•„ìš”
- VTL (Velocity Template Language) ì‚¬ìš©
- ë³µì¡í•œ ë§¤í•‘ ê°€ëŠ¥

#### ì¸ì¦/ì¸ê°€ ë°©ì‹

**1. API Key** (REST APIë§Œ):
```bash
# API Key ìƒì„±
aws apigateway create-api-key --name "mobile-app-key"

# Usage Plan ì—°ê²°
aws apigateway create-usage-plan \
  --name "basic-plan" \
  --throttle burstLimit=100,rateLimit=50
```

**ì‚¬ìš© ì‚¬ë¡€**: ê°„ë‹¨í•œ ì•± ì‹ë³„, ì‚¬ìš©ëŸ‰ ì œì–´

**2. IAM ì¸ì¦**:
```python
# AWS SDKê°€ ìë™ìœ¼ë¡œ ì„œëª…
import boto3

client = boto3.client('apigateway')
response = client.invoke(
    FunctionName='my-api',
    Payload=json.dumps(data)
)
```

**ì‚¬ìš© ì‚¬ë¡€**: AWS ì„œë¹„ìŠ¤ ê°„ í†µì‹ , ë‚´ë¶€ API

**3. Cognito User Pool** (ê¶Œì¥):
```javascript
// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ JWT í† í° ì „ì†¡
fetch('https://api.example.com/users', {
  headers: {
    'Authorization': `Bearer ${cognitoToken}`
  }
})
```

**ì‚¬ìš© ì‚¬ë¡€**: ì‚¬ìš©ì ì¸ì¦, ëª¨ë°”ì¼/ì›¹ ì•±

![API Gateway with Cognito](./generated-diagrams/api_gateway_cognito.png)

*ê·¸ë¦¼: API Gateway + Cognito ì¸ì¦ íë¦„ - JWT í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦*

**4. Lambda Authorizer** (ì»¤ìŠ¤í…€):
```python
def lambda_handler(event, context):
    token = event['authorizationToken']
    
    # í† í° ê²€ì¦ ë¡œì§
    if validate_token(token):
        return {
            'principalId': 'user123',
            'policyDocument': {
                'Version': '2012-10-17',
                'Statement': [{
                    'Action': 'execute-api:Invoke',
                    'Effect': 'Allow',
                    'Resource': event['methodArn']
                }]
            }
        }
    else:
        raise Exception('Unauthorized')
```

**ì‚¬ìš© ì‚¬ë¡€**: ì»¤ìŠ¤í…€ ì¸ì¦ ë¡œì§, ì„œë“œíŒŒí‹° OAuth

#### ì‹¤ë¬´ ì—°ë™ íŒ¨í„´

**íŒ¨í„´ 1: ì„œë²„ë¦¬ìŠ¤ REST API**
```
Client â†’ API Gateway (HTTP API) â†’ Lambda â†’ DynamoDB
         â†“
    Cognito JWT ì¸ì¦
```

**íŒ¨í„´ 2: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê²Œì´íŠ¸ì›¨ì´**
```
Client â†’ API Gateway (REST API) â†’ Lambda â†’ ì—¬ëŸ¬ ë°±ì—”ë“œ
         â†“                              â†“
    API Key ì¸ì¦                    - RDS
                                    - ElastiCache
                                    - ì™¸ë¶€ API
```

**íŒ¨í„´ 3: ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**
```
Client â†’ API Gateway â†’ Lambda â†’ SQS/SNS â†’ ë¹„ë™ê¸° ì²˜ë¦¬
         â†“
    Lambda Authorizer
```

---

## ğŸ’° ë¹„ìš© êµ¬ì¡° (5ë¶„)

### í”„ë¦¬í‹°ì–´ (12ê°œì›”)
- **REST API**: 100ë§Œ í˜¸ì¶œ/ì›”
- **HTTP API**: 100ë§Œ í˜¸ì¶œ/ì›”
- **WebSocket**: 100ë§Œ ë©”ì‹œì§€ + 75ë§Œ ì—°ê²° ë¶„

### ì‹¤ì œ ë¹„ìš© ê³„ì‚° (ap-northeast-2)

**ì‹œë‚˜ë¦¬ì˜¤**: ì›” 1ì²œë§Œ í˜¸ì¶œ ì„œë²„ë¦¬ìŠ¤ API

**HTTP API**:
```
ì²« 3ì–µ í˜¸ì¶œ: 10M * $1.29/M = $12.90
ì´ ë¹„ìš©: $12.90/ì›”
```

**REST API**:
```
ì²« 3ì–µ í˜¸ì¶œ: 10M * $4.25/M = $42.50
ì´ ë¹„ìš©: $42.50/ì›”
```

**ë¹„ìš© ì ˆê°**: HTTP API ì‚¬ìš© ì‹œ **70% ì ˆê°** ($29.60/ì›”)

### ì¶”ê°€ ë¹„ìš©

**Lambda í˜¸ì¶œ**:
```
10M í˜¸ì¶œ * $0.20/M = $2.00
Lambda ì‹¤í–‰ ì‹œê°„ (128MB, 100ms): $2.08
ì´ Lambda ë¹„ìš©: $4.08/ì›”
```

**ë°ì´í„° ì „ì†¡**:
```
10M í˜¸ì¶œ * 10KB ì‘ë‹µ = 100GB
ì²« 10TB ë¬´ë£Œ (EC2 Data Transfer)
ì¶”ê°€ ë¹„ìš©: $0
```

**ì´ ì˜ˆìƒ ë¹„ìš©**:
- **HTTP API + Lambda**: $16.98/ì›”
- **REST API + Lambda**: $46.58/ì›”

### ë¹„ìš© ìµœì í™” íŒ

1. **HTTP API ìš°ì„  ì‚¬ìš©**: 70% ì €ë ´
2. **ìºì‹± í™œìš©**: ë°˜ë³µ ìš”ì²­ ê°ì†Œ (REST APIë§Œ)
3. **Lambda ìµœì í™”**: ë©”ëª¨ë¦¬/ì‹¤í–‰ ì‹œê°„ ìµœì†Œí™”
4. **CloudFront í†µí•©**: ì •ì  ì½˜í…ì¸  ìºì‹±

---

## ğŸ”‘ í•µì‹¬ í‚¤ì›Œë“œ

- **API Gateway**: AWS ê´€ë¦¬í˜• API ì„œë¹„ìŠ¤
- **REST API**: ê¸°ëŠ¥ ì¤‘ì‹¬, ê³ ê¸‰ ê¸°ëŠ¥ ì œê³µ
- **HTTP API**: ë¹„ìš© ì¤‘ì‹¬, 70% ì €ë ´
- **Lambda Integration**: ì„œë²„ë¦¬ìŠ¤ ë°±ì—”ë“œ í†µí•©
- **Cognito**: ì‚¬ìš©ì ì¸ì¦ (JWT)
- **API Key**: ê°„ë‹¨í•œ ì•± ì‹ë³„
- **Stage**: í™˜ê²½ ë¶„ë¦¬ (dev/prod)
- **Throttling**: ìš”ì²­ ì œí•œ

---

## ğŸ“ Session ë§ˆë¬´ë¦¬

### âœ… ì˜¤ëŠ˜ Session ì„±ê³¼
- [ ] API Gateway í•„ìš”ì„± ì´í•´
- [ ] REST API vs HTTP API ì°¨ì´ íŒŒì•…
- [ ] Lambda í†µí•© ë°©ì‹ ì´í•´
- [ ] ì¸ì¦/ì¸ê°€ ë©”ì»¤ë‹ˆì¦˜ ìŠµë“
- [ ] Kongê³¼ì˜ ë¹„êµë¥¼ í†µí•œ ê°œë… ì •ë¦¬

### ğŸ¯ ë‹¤ìŒ Session ì¤€ë¹„
- **Session 2**: Cognito (ì‚¬ìš©ì ì¸ì¦/ì¸ê°€)
- **ì—°ê³„**: API Gateway + Cognito í†µí•© ì‹¤ìŠµ

### ğŸ”— ê³µì‹ ë¬¸ì„œ (í•„ìˆ˜)

**âš ï¸ í•™ìƒë“¤ì´ ì§ì ‘ í™•ì¸í•´ì•¼ í•  ê³µì‹ ë¬¸ì„œ**:
- ğŸ“˜ [API Gatewayë€?](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html)
- ğŸ“— [API Gateway ê°œë…](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-basic-concept.html)
- ğŸ“™ [REST API vs HTTP API](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-vs-rest.html)
- ğŸ“• [API Gateway ìš”ê¸ˆ](https://aws.amazon.com/api-gateway/pricing/)
- ğŸ†• [API Gateway ìµœì‹  ì—…ë°ì´íŠ¸](https://aws.amazon.com/api-gateway/whats-new/)

---

<div align="center">

**ğŸšª API ê´€ë¦¬** â€¢ **ğŸ” ì¸ì¦/ì¸ê°€** â€¢ **âš¡ ì„œë²„ë¦¬ìŠ¤** â€¢ **ğŸ’° ë¹„ìš© íš¨ìœ¨**

*ë‹¤ìŒ: Session 2 - Cognito (ì‚¬ìš©ì ì¸ì¦)*

</div>
