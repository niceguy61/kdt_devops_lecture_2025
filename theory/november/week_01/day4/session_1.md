# November Week 1 Day 4 Session 1: Elastic Load Balancing

<div align="center">

**âš–ï¸ íŠ¸ë˜í”½ ë¶„ì‚°** â€¢ **ğŸ”„ ê³ ê°€ìš©ì„±** â€¢ **ğŸ¯ Health Check**

*ALB, NLB, CLBë¡œ ì•ˆì •ì ì¸ íŠ¸ë˜í”½ ë¶„ì‚°*

</div>

---

## ğŸ•˜ ì„¸ì…˜ ì •ë³´
**ì‹œê°„**: 09:00-09:40 (40ë¶„)
**ëª©í‘œ**: Elastic Load Balancing ì´í•´ ë° íƒ€ì…ë³„ ì„ íƒ ê¸°ì¤€

---

## ğŸ“– ì„œë¹„ìŠ¤ ê°œìš”

### 1. ìƒì„± ë°°ê²½ (Why?)

**ë¬¸ì œ ìƒí™©**:
- **ë‹¨ì¼ ì„œë²„ í•œê³„**: íŠ¸ë˜í”½ ì¦ê°€ ì‹œ ì„œë²„ ê³¼ë¶€í•˜
- **ì¥ì•  ëŒ€ì‘ ì–´ë ¤ì›€**: ì„œë²„ ë‹¤ìš´ ì‹œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
- **ìˆ˜ë™ íŠ¸ë˜í”½ ë¶„ì‚°**: DNS ë¼ìš´ë“œ ë¡œë¹ˆì˜ í•œê³„
- **Health Check ë¶€ì¬**: ì¥ì•  ì„œë²„ë¡œ íŠ¸ë˜í”½ ì „ì†¡

**AWS ELB ì†”ë£¨ì…˜**:
- **ìë™ íŠ¸ë˜í”½ ë¶„ì‚°**: ì—¬ëŸ¬ ì„œë²„ë¡œ ê· ë“± ë¶„ë°°
- **Health Check**: ì¥ì•  ì„œë²„ ìë™ ì œì™¸
- **ê³ ê°€ìš©ì„±**: Multi-AZ ìë™ ë°°í¬
- **Auto Scaling í†µí•©**: ë™ì  ì„œë²„ ì¶”ê°€/ì œê±°

---

### 2. í•µì‹¬ ì›ë¦¬ (How?)

**ELB ì•„í‚¤í…ì²˜**:

![ALB Multi-AZ Architecture](./generated-diagrams/generated-diagrams/alb_multi_az.png)

*ê·¸ë¦¼: ALB Multi-AZ ì•„í‚¤í…ì²˜ - ì—¬ëŸ¬ AZì— íŠ¸ë˜í”½ ë¶„ì‚°*

```
ì‚¬ìš©ì ìš”ì²­
    â†“
ELB (Multi-AZ)
    â†“ íŠ¸ë˜í”½ ë¶„ì‚°
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ EC2 â”‚ EC2 â”‚ EC2 â”‚
â”‚ AZ-Aâ”‚ AZ-Bâ”‚ AZ-Câ”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

**ì‘ë™ ì›ë¦¬**:
1. **ìš”ì²­ ìˆ˜ì‹ **: ì‚¬ìš©ì ìš”ì²­ì„ ELBê°€ ë°›ìŒ
2. **Health Check**: ì •ìƒ ì„œë²„ë§Œ ì„ íƒ
3. **íŠ¸ë˜í”½ ë¶„ì‚°**: ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë¶„ë°° (Round Robin, Least Connection)
4. **ì‘ë‹µ ì „ë‹¬**: ì„œë²„ ì‘ë‹µì„ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬

---

### 3. ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€ (When?)

**ALB (Application Load Balancer) ì í•©**:
- âœ… HTTP/HTTPS ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
- âœ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ (ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ…)
- âœ… ì»¨í…Œì´ë„ˆ (ECS, EKS)
- âœ… WebSocket, HTTP/2

**NLB (Network Load Balancer) ì í•©**:
- âœ… TCP/UDP íŠ¸ë˜í”½
- âœ… ì´ˆê³ ì„±ëŠ¥ (ìˆ˜ë°±ë§Œ RPS)
- âœ… ê³ ì • IP í•„ìš”
- âœ… ê²Œì„ ì„œë²„, IoT

**GLB (Gateway Load Balancer) ì í•©**:
- âœ… ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ í†µí•© (ë°©í™”ë²½, IDS/IPS, DLP)
- âœ… ì¤‘ì•™ ì§‘ì¤‘ì‹ ë³´ì•ˆ ì •ì±…
- âœ… ê·œì • ì¤€ìˆ˜ (PCI-DSS, HIPAA)
- âœ… DDoS ë°©ì–´ ë° ì¹¨ì… íƒì§€

**CLB (Classic Load Balancer) ì í•©**:
- âš ï¸ ë ˆê±°ì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜
- âš ï¸ EC2-Classic (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)

---

### ğŸ’¼ ì‹¤ë¬´ ì‚¬ë¡€: Sharethroughì˜ ALB â†’ NLB ë§ˆì´ê·¸ë ˆì´ì…˜

**íšŒì‚¬**: Sharethrough (Equativ ë¸Œëœë“œ, ê¸€ë¡œë²Œ ê´‘ê³  ê±°ë˜ì†Œ)
**ë°°ê²½**: 2011ë…„ë¶€í„° AWS ê³ ê°, ì‹¤ì‹œê°„ ì…ì°°(RTB) êµí™˜ ì¸í”„ë¼ ìš´ì˜

**ë¬¸ì œ ìƒí™©**:
- **ë†’ì€ ë¹„ìš©**: ALB LCU ë¹„ìš© ê¸‰ì¦
- **íŠ¸ë˜í”½ íŠ¹ì„±**: ì´ˆë‹¹ ìˆ˜ë°±ë§Œ ê±´ì˜ TCP ìš”ì²­
- **ì„±ëŠ¥ ìš”êµ¬**: ë°€ë¦¬ì´ˆ ë‹¨ìœ„ ì§€ì—°ì‹œê°„ ì¤‘ìš”

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ì •**:
- ALB (Layer 7) â†’ NLB (Layer 4)
- NLBì˜ ë‚®ì€ NLCU ë¹„ìš© í™œìš©
- ì´ˆê³ ì„±ëŠ¥ TCP ì²˜ë¦¬ í•„ìš”

**ë„ì „ ê³¼ì œ**:
1. **Cross-AZ ë°¸ëŸ°ì‹±**: NLBëŠ” ëª¨ë“  AZë¡œ íŠ¸ë˜í”½ ë¶„ì‚° â†’ ë°ì´í„° ì „ì†¡ ë¹„ìš© ì¦ê°€
2. **ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ**: Bridge ëª¨ë“œ + ë™ì  í¬íŠ¸ ë§¤í•‘ â†’ NLB IP íƒ€ê²ŸíŒ… ë¶ˆê°€
3. **í”„ë¡œí† ì½œ ì²˜ë¦¬**: NLBëŠ” HTTP êµ¬ë¶„ ë¶ˆê°€ â†’ íŠ¸ë˜í”½ ë¶ˆê· í˜•
4. **Spot ì¸ìŠ¤í„´ìŠ¤**: AZë³„ ê°€ìš©ì„± ì°¨ì´ â†’ ê· ë“± ë¶„ì‚° ì–´ë ¤ì›€

**í•´ê²° ë°©ë²•**:
- **Envoy í”„ë¡ì‹œ**: TLS ì¢…ë£Œ ë° ë³´ì•ˆ ê°•í™”
- **Multi-AZ ì•„í‚¤í…ì²˜**: ê³ ê°€ìš©ì„± í™•ë³´
- **ECS ìµœì í™”**: awsvpc ë„¤íŠ¸ì›Œí¬ ëª¨ë“œë¡œ ì „í™˜
- **Graviton ë„ì…**: ARM ê¸°ë°˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¹„ìš© ì ˆê°

**ê²°ê³¼**:
- âœ… **ë¹„ìš© ìµœì í™”**: LCU ë¹„ìš© ëŒ€í­ ì ˆê°
- âœ… **ì„±ëŠ¥ ìœ ì§€**: ì§€ì—°ì‹œê°„ ê°œì„ 
- âœ… **ì „ëµì  ê°œì„ **: Graviton ë„ì…ìœ¼ë¡œ ì¶”ê°€ ì ˆê°

**êµí›ˆ**:
- âš ï¸ **íŠ¸ë˜í”½ íŒ¨í„´ ë¶„ì„ í•„ìˆ˜**: ì²˜ë¦¬ ë°”ì´íŠ¸ê°€ ì£¼ìš” ë¹„ìš© ìš”ì¸ì´ë©´ NLBê°€ ì˜¤íˆë ¤ ë¹„ìŒ€ ìˆ˜ ìˆìŒ
- âš ï¸ **ì´ ì†Œìœ  ë¹„ìš©(TCO) ê³ ë ¤**: ë§ˆì´ê·¸ë ˆì´ì…˜ ë¹„ìš©, ìš´ì˜ ë³µì¡ë„ í¬í•¨
- âš ï¸ **PoC í…ŒìŠ¤íŠ¸**: í”„ë¡œë•ì…˜ ì „ ì¶©ë¶„í•œ ê²€ì¦ í•„ìš”
- âœ… **AWS ì „ë¬¸ê°€ í™œìš©**: ë³µì¡í•œ ìµœì í™”ëŠ” AWS ì§€ì› í™œìš©

**ì°¸ì¡°**: [Sharethrough's Journey from ALB to NLB](https://aws.amazon.com/blogs/industries/optimizing-ad-exchange-infrastructure-sharethroughs-journey-from-alb-to-nlb/) (2024.07)

---

### 4. ë¹„ìŠ·í•œ ì„œë¹„ìŠ¤ ë¹„êµ (Which?)

**ALB vs NLB vs GLB vs CLB**:

| íŠ¹ì„± | ALB | NLB | GLB | CLB |
|------|-----|-----|-----|-----|
| **OSI ê³„ì¸µ** | Layer 7 (HTTP/HTTPS) | Layer 4 (TCP/UDP) | Layer 3 (Gateway) | Layer 4/7 |
| **ì„±ëŠ¥** | ì¤‘ê°„ | ë§¤ìš° ë†’ìŒ | ë§¤ìš° ë†’ìŒ | ë‚®ìŒ |
| **ì£¼ìš” ìš©ë„** | ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ | TCP/UDP íŠ¸ë˜í”½ | ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ | ë ˆê±°ì‹œ |
| **ê²½ë¡œ ë¼ìš°íŒ…** | âœ… ì§€ì› | âŒ ë¯¸ì§€ì› | âŒ ë¯¸ì§€ì› | âŒ ë¯¸ì§€ì› |
| **WebSocket** | âœ… ì§€ì› | âœ… ì§€ì› | âŒ ë¯¸ì§€ì› | âŒ ë¯¸ì§€ì› |
| **ê³ ì • IP** | âŒ ë¯¸ì§€ì› | âœ… ì§€ì› | âœ… ì§€ì› | âŒ ë¯¸ì§€ì› |
| **ê°€ê²©** | ì¤‘ê°„ | ì¤‘ê°„ | ì¤‘ê°„ | ë‚®ìŒ |
| **ê¶Œì¥ ì—¬ë¶€** | âœ… ê¶Œì¥ | âœ… ê¶Œì¥ | âœ… íŠ¹ìˆ˜ ëª©ì  | âš ï¸ ë ˆê±°ì‹œë§Œ |

**ì„ íƒ ê¸°ì¤€**:
- **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜** â†’ ALB
- **ê³ ì„±ëŠ¥ TCP/UDP** â†’ NLB
- **ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ (ë°©í™”ë²½, IDS/IPS)** â†’ GLB
- **ë ˆê±°ì‹œ ì‹œìŠ¤í…œ** â†’ CLB (ë§ˆì´ê·¸ë ˆì´ì…˜ ê¶Œì¥)

---

### 5. ì¥ë‹¨ì  ë¶„ì„

**ALB ì¥ì **:
- âœ… ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ… (/api â†’ API ì„œë²„, /web â†’ ì›¹ ì„œë²„)

![ALB Path Routing](./generated-diagrams/generated-diagrams/alb_path_routing.png)

*ê·¸ë¦¼: ALB ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ… - URL ê²½ë¡œì— ë”°ë¼ ë‹¤ë¥¸ ì„œë²„ë¡œ ë¶„ì‚°*

- âœ… í˜¸ìŠ¤íŠ¸ ê¸°ë°˜ ë¼ìš°íŒ… (api.example.com, web.example.com)
- âœ… HTTP/2, WebSocket ì§€ì›
- âœ… Lambda íƒ€ê²Ÿ ì§€ì›

**ALB ë‹¨ì **:
- âš ï¸ ê³ ì • IP ë¯¸ì§€ì›
- âš ï¸ TCP/UDP ë¯¸ì§€ì›
- âš ï¸ NLBë³´ë‹¤ ì„±ëŠ¥ ë‚®ìŒ

**NLB ì¥ì **:
- âœ… ì´ˆê³ ì„±ëŠ¥ (ìˆ˜ë°±ë§Œ RPS)

![NLB High Performance](./generated-diagrams/generated-diagrams/nlb_performance.png)

*ê·¸ë¦¼: NLB ì´ˆê³ ì„±ëŠ¥ ì•„í‚¤í…ì²˜ - TCP/UDP íŠ¸ë˜í”½ ì²˜ë¦¬*

- âœ… ê³ ì • IP (Elastic IP í• ë‹¹ ê°€ëŠ¥)
- âœ… TCP/UDP ì§€ì›
- âœ… ë‚®ì€ ì§€ì—°ì‹œê°„

**NLB ë‹¨ì **:
- âš ï¸ HTTP í—¤ë” ê¸°ë°˜ ë¼ìš°íŒ… ë¶ˆê°€
- âš ï¸ WAF í†µí•© ë¶ˆê°€
- âš ï¸ ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ… ë¶ˆê°€

**GLB (Gateway Load Balancer) ì¥ì **:
- âœ… ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ í†µí•© (ë°©í™”ë²½, IDS/IPS)

![GWLB Security Architecture](./generated-diagrams/gwlb_security_architecture.png)

*ê·¸ë¦¼: GWLB ë³´ì•ˆ ì•„í‚¤í…ì²˜ - íŠ¸ë˜í”½ì´ GWLB Endpointë¥¼ í†µí•´ ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ë¥¼ ê±°ì³ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬*

- âœ… íˆ¬ëª…í•œ ë„¤íŠ¸ì›Œí¬ ê²Œì´íŠ¸ì›¨ì´ (Layer 3)
- âœ… ê³ ê°€ìš©ì„± ë³´ì•ˆ ì¸í”„ë¼
- âœ… ìë™ ìŠ¤ì¼€ì¼ë§ ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤

**GLB ì‘ë™ ì›ë¦¬**:
1. **íŠ¸ë˜í”½ ìˆ˜ì‹ **: ëª¨ë“  ì¸ë°”ìš´ë“œ íŠ¸ë˜í”½ì„ GWLBê°€ ìˆ˜ì‹ 
2. **ë³´ì•ˆ ê²€ì‚¬**: ë°©í™”ë²½, IDS/IPS ë“± ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ë¡œ ì „ë‹¬
3. **ì •ì±… ì ìš©**: ë³´ì•ˆ ì •ì±…ì— ë”°ë¼ íŠ¸ë˜í”½ í—ˆìš©/ì°¨ë‹¨
4. **í´ë¦° íŠ¸ë˜í”½**: ê²€ì¦ëœ íŠ¸ë˜í”½ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬
5. **íˆ¬ëª…ì„±**: ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³´ì•ˆ ê³„ì¸µì„ ì¸ì‹í•˜ì§€ ëª»í•¨

**GLB ì‚¬ìš© ì‚¬ë¡€**:
- **ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ë³´ì•ˆ ì •ì±…
- **ê·œì • ì¤€ìˆ˜**: PCI-DSS, HIPAA ë“± ë³´ì•ˆ ìš”êµ¬ì‚¬í•­
- **DDoS ë°©ì–´**: ëŒ€ê·œëª¨ ê³µê²© ì°¨ë‹¨
- **ì¹¨ì… íƒì§€**: ì‹¤ì‹œê°„ ìœ„í˜‘ íƒì§€ ë° ì°¨ë‹¨

**GLB ë‹¨ì **:
- âš ï¸ ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ ë¹„ìš© ì¶”ê°€
- âš ï¸ ë³µì¡í•œ ì„¤ì • ë° ê´€ë¦¬
- âš ï¸ ì§€ì—°ì‹œê°„ ì¦ê°€ (ë³´ì•ˆ ê²€ì‚¬ ì‹œê°„)

---

### 6. ë¹„ìš© êµ¬ì¡° ğŸ’°

**ALB ë¹„ìš©**:
- **ì‹œê°„ë‹¹**: $0.0225/hour
- **LCU (Load Balancer Capacity Unit)**: $0.008/LCU-hour
  - ì‹ ê·œ ì—°ê²°: 25/ì´ˆ
  - í™œì„± ì—°ê²°: 3,000/ë¶„
  - ì²˜ë¦¬ ë°”ì´íŠ¸: 1GB/hour
  - ê·œì¹™ í‰ê°€: 1,000/ì´ˆ
- **LCU Reservation** (2024ë…„ ì‹ ê·œ): ìµœì†Œ ìš©ëŸ‰ ì˜ˆì•½ ê°€ëŠ¥
  - ì˜ˆì•½ëœ LCUì— ëŒ€í•œ ì‹œê°„ë‹¹ ìš”ê¸ˆ ì§€ë¶ˆ
  - ì˜ˆì•½ ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ì¶”ê°€ LCU ìš”ê¸ˆ ë°œìƒ

**NLB ë¹„ìš©**:
- **ì‹œê°„ë‹¹**: $0.0225/hour
- **NLCU**: $0.006/NLCU-hour
  - ì‹ ê·œ ì—°ê²°: 800/ì´ˆ
  - í™œì„± ì—°ê²°: 100,000/ë¶„
  - ì²˜ë¦¬ ë°”ì´íŠ¸: 1GB/hour
- **NLCU Reservation** (2024ë…„ ì‹ ê·œ): ìµœì†Œ ìš©ëŸ‰ ì˜ˆì•½ ê°€ëŠ¥

**GLB ë¹„ìš©**:
- **ì‹œê°„ë‹¹**: $0.0125/hour
- **GLCU**: $0.004/GLCU-hour
  - ì²˜ë¦¬ ë°”ì´íŠ¸: 1GB/hour

**ë¹„ìš© ìµœì í™”**:
- ë¶ˆí•„ìš”í•œ ë¡œë“œë°¸ëŸ°ì„œ ì‚­ì œ
- Idle ìƒíƒœ ë¡œë“œë°¸ëŸ°ì„œ ì œê±°
- íŠ¸ë˜í”½ íŒ¨í„´ ë¶„ì„ í›„ ì ì ˆí•œ íƒ€ì… ì„ íƒ
- **LCU Reservation**: ì˜ˆì¸¡ ê°€ëŠ¥í•œ íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œì—ë§Œ ì‚¬ìš©
- Cross-Zone Load Balancing ë¹„ìš© ê³ ë ¤ (NLBëŠ” ìœ ë£Œ)

**ì˜ˆìƒ ë¹„ìš© (Lab)**:
- ALB 1ì‹œê°„: $0.0225
- LCU (ìµœì†Œ): $0.008
- í•©ê³„: ~$0.03/hour

---

### 7. ìµœì‹  ì—…ë°ì´íŠ¸ ğŸ†•

**2024ë…„ ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- **LCU Reservation** (11ì›” ì¶œì‹œ): íŠ¸ë˜í”½ ê¸‰ì¦ ëŒ€ë¹„ ìš©ëŸ‰ ì‚¬ì „ ì˜ˆì•½
  - ì´ë²¤íŠ¸ í‹°ì¼“ íŒë§¤, ì‹ ì œí’ˆ ì¶œì‹œ ë“± ì˜ˆìƒ ê°€ëŠ¥í•œ íŠ¸ë˜í”½ ê¸‰ì¦ ëŒ€ì‘
  - ìµœì†Œ ìš©ëŸ‰ ë³´ì¥ìœ¼ë¡œ ìŠ¤ì¼€ì¼ë§ ì§€ì—° ë°©ì§€
  - ALB: ëª¨ë“  ë¦¬ì „, NLB: ì£¼ìš” ë¦¬ì „ ì§€ì›
- **Zonal Shift**: AZ ì¥ì•  ì‹œ ìë™ íŠ¸ë˜í”½ ì „í™˜
  - ë‹¨ì¼ AZ ì¥ì•  ë°œìƒ ì‹œ ë‹¤ë¥¸ AZë¡œ íŠ¸ë˜í”½ ìë™ ì´ë™
  - Cross-Zone Load Balancingê³¼ í•¨ê»˜ ì‚¬ìš©
  - CloudWatch ì•ŒëŒê³¼ ì—°ë™í•˜ì—¬ ìë™í™” ê°€ëŠ¥
- **ALB gRPC ì§€ì› ê°•í™”**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  ìµœì í™”
- **NLB TLS 1.3 ì§€ì›**: ë³´ì•ˆ ë° ì„±ëŠ¥ í–¥ìƒ
- **ALB Lambda íƒ€ê²Ÿ ì„±ëŠ¥ ê°œì„ **: ì„œë²„ë¦¬ìŠ¤ í†µí•© ê°•í™”

**2025ë…„ ì˜ˆì •**:
- ALB: HTTP/3 (QUIC) ì§€ì› ê²€í† 
- NLB: UDP ì„±ëŠ¥ í–¥ìƒ
- ë” ì„¸ë°€í•œ íŠ¸ë˜í”½ ì œì–´ ê¸°ëŠ¥

**ì°¸ì¡°**: [ELB What's New](https://aws.amazon.com/elasticloadbalancing/whats-new/) (2024.11 ì—…ë°ì´íŠ¸)

---

### 8. ì˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²• âœ…

**ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤**:
1. **Multi-AZ ë°°í¬**: ìµœì†Œ 2ê°œ AZì— ë°°í¬
2. **Health Check ì„¤ì •**: ì ì ˆí•œ ê°„ê²© ë° ì„ê³„ê°’
3. **Connection Draining**: ì¢…ë£Œ ì „ ê¸°ì¡´ ì—°ê²° ì™„ë£Œ (300ì´ˆ)
4. **Access Logs**: S3ì— ë¡œê·¸ ì €ì¥í•˜ì—¬ ë¶„ì„
5. **CloudWatch ì•ŒëŒ**: ë¹„ì •ìƒ íƒ€ê²Ÿ ìˆ˜ ëª¨ë‹ˆí„°ë§

**ì‹¤ë¬´ íŒ**:
- Target Groupë³„ë¡œ Health Check ê²½ë¡œ ë‹¤ë¥´ê²Œ ì„¤ì •
- Sticky Sessionì€ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©
- Cross-Zone Load Balancing í™œì„±í™” (ê· ë“± ë¶„ì‚°)
- **GLB ì‚¬ìš© ì‹œ**: ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ Auto Scaling ì„¤ì • í•„ìˆ˜

**GLB ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤**:
1. **Multi-AZ ë°°í¬**: ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ë¥¼ ì—¬ëŸ¬ AZì— ë°°í¬
2. **Auto Scaling**: íŠ¸ë˜í”½ ì¦ê°€ ì‹œ ìë™ í™•ì¥
3. **Health Check**: ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ ìƒíƒœ ëª¨ë‹ˆí„°ë§
4. **ë¡œê¹…**: VPC Flow Logsë¡œ íŠ¸ë˜í”½ ë¶„ì„
5. **ì •ì±… ê´€ë¦¬**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ë³´ì•ˆ ì •ì±… ê´€ë¦¬

---

### 9. ì˜ëª» ì‚¬ìš©í•˜ëŠ” ë°©ë²• âŒ

**í”í•œ ì‹¤ìˆ˜**:
1. âŒ ë‹¨ì¼ AZì—ë§Œ ë°°í¬ (ê³ ê°€ìš©ì„± ë¶€ì¡±)
2. âŒ Health Check ê°„ê²© ë„ˆë¬´ ì§§ìŒ (ë¶ˆí•„ìš”í•œ ë¶€í•˜)
3. âŒ Connection Draining ë¯¸ì„¤ì • (ì—°ê²° ëŠê¹€)
4. âŒ ëª¨ë“  íŠ¸ë˜í”½ì— Sticky Session ì‚¬ìš© (ë¶€í•˜ ë¶ˆê· í˜•)
5. âŒ Access Logs ë¯¸í™œì„±í™” (ë¬¸ì œ ë¶„ì„ ì–´ë ¤ì›€)

**ì•ˆí‹° íŒ¨í„´**:
- ëª¨ë“  ì„œë¹„ìŠ¤ì— ALB ì‚¬ìš© (ë¹„ìš© ì¦ê°€)
- Health Check ê²½ë¡œë¥¼ / ë¡œ ì„¤ì • (ë¶ˆí•„ìš”í•œ ë¶€í•˜)
- íƒ€ê²Ÿ ìˆ˜ê°€ 1ê°œ (ë‹¨ì¼ ì¥ì• ì )
- **GLB ì˜¤ìš©**: ë‹¨ìˆœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— GLB ì‚¬ìš© (ê³¼ë„í•œ ë³µì¡ì„±)

**GLB í”í•œ ì‹¤ìˆ˜**:
1. âŒ ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ ë‹¨ì¼ AZ ë°°í¬ (ê³ ê°€ìš©ì„± ë¶€ì¡±)
2. âŒ GENEVE í”„ë¡œí† ì½œ ë¯¸ì§€ì› ì–´í”Œë¼ì´ì–¸ìŠ¤ ì‚¬ìš©
3. âŒ Health Check ë¯¸ì„¤ì • (ì¥ì•  ì–´í”Œë¼ì´ì–¸ìŠ¤ë¡œ íŠ¸ë˜í”½ ì „ì†¡)
4. âŒ ë¡œê¹… ë¯¸í™œì„±í™” (ë³´ì•ˆ ì´ë²¤íŠ¸ ì¶”ì  ë¶ˆê°€)
5. âŒ ê³¼ë„í•œ ë³´ì•ˆ ê²€ì‚¬ (ì„±ëŠ¥ ì €í•˜)

---

### 10. êµ¬ì„± ìš”ì†Œ ìƒì„¸

**ì£¼ìš” êµ¬ì„± ìš”ì†Œ**:

**1. Listener**:
- ì—­í• : í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ìˆ˜ì‹ 
- í”„ë¡œí† ì½œ: HTTP, HTTPS, TCP, UDP
- í¬íŠ¸: 1-65535
- ê·œì¹™: ìš”ì²­ì„ ì–´ëŠ Target Groupìœ¼ë¡œ ë³´ë‚¼ì§€ ê²°ì •

**2. Target Group**:
- ì—­í• : íŠ¸ë˜í”½ì„ ë°›ì„ ëŒ€ìƒ ê·¸ë£¹
- íƒ€ê²Ÿ íƒ€ì…: EC2, IP, Lambda
- Health Check: íƒ€ê²Ÿ ìƒíƒœ í™•ì¸
- ì•Œê³ ë¦¬ì¦˜: Round Robin, Least Outstanding Requests

**3. Health Check**:
- ì—­í• : íƒ€ê²Ÿ ì •ìƒ ì—¬ë¶€ í™•ì¸

![Health Check Process](./generated-diagrams/generated-diagrams/health_check_process.png)

*ê·¸ë¦¼: Health Check í”„ë¡œì„¸ìŠ¤ - ì •ìƒ íƒ€ê²Ÿì—ë§Œ íŠ¸ë˜í”½ ì „ì†¡*

- ì„¤ì •:
  - Protocol: HTTP, HTTPS, TCP
  - Path: /health (ì˜ˆì‹œ)
  - Interval: 30ì´ˆ (ê¸°ë³¸)
  - Timeout: 5ì´ˆ
  - Healthy threshold: 5íšŒ ì—°ì† ì„±ê³µ
  - Unhealthy threshold: 2íšŒ ì—°ì† ì‹¤íŒ¨

**4. Routing Rules**:
- ê²½ë¡œ ê¸°ë°˜: /api/* â†’ API Target Group
- í˜¸ìŠ¤íŠ¸ ê¸°ë°˜: api.example.com â†’ API Target Group
- HTTP í—¤ë”: User-Agent ê¸°ë°˜ ë¼ìš°íŒ…
- ì¿¼ë¦¬ ìŠ¤íŠ¸ë§: ?version=v2 â†’ V2 Target Group

**5. Gateway Load Balancer Endpoint (GWLBE)**:
- ì—­í• : VPCì™€ ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤ ì—°ê²°
- ì‘ë™ ë°©ì‹:
  1. **GENEVE í”„ë¡œí† ì½œ**: íŠ¸ë˜í”½ ìº¡ìŠí™” (í¬íŠ¸ 6081)
  2. **íˆ¬ëª…í•œ ì „ë‹¬**: ì›ë³¸ IP ë° í¬íŠ¸ ìœ ì§€
  3. **ì–‘ë°©í–¥ ê²€ì‚¬**: ì¸ë°”ìš´ë“œ/ì•„ì›ƒë°”ìš´ë“œ ëª¨ë‘ ê²€ì‚¬
- êµ¬ì„±:
  - VPC Endpoint: ê° AZë§ˆë‹¤ ìƒì„±
  - Route Table: GWLBEë¡œ íŠ¸ë˜í”½ ë¼ìš°íŒ…
  - Security Appliance: EC2 ê¸°ë°˜ ë°©í™”ë²½/IDS

**GLB íŠ¸ë˜í”½ íë¦„**:
```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant IGW as Internet Gateway
    participant GWLBE as GWLB Endpoint
    participant GWLB as Gateway LB
    participant SA as ë³´ì•ˆ ì–´í”Œë¼ì´ì–¸ìŠ¤
    participant App as ì• í”Œë¦¬ì¼€ì´ì…˜

    User->>IGW: 1. HTTP ìš”ì²­
    IGW->>GWLBE: 2. VPC Endpointë¡œ ì „ë‹¬
    GWLBE->>GWLB: 3. GENEVE ìº¡ìŠí™”
    GWLB->>SA: 4. ë³´ì•ˆ ê²€ì‚¬ ìš”ì²­
    SA->>SA: 5. ë°©í™”ë²½/IDS ê²€ì‚¬
    SA->>GWLB: 6. ê²€ì‚¬ ì™„ë£Œ
    GWLB->>GWLBE: 7. í´ë¦° íŠ¸ë˜í”½
    GWLBE->>App: 8. ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë‹¬
    App->>User: 9. ì‘ë‹µ (ì—­ìˆœ)
```

---

### 11. ê³µì‹ ë¬¸ì„œ ë§í¬ (í•„ìˆ˜ 5ê°œ)

**âš ï¸ í•™ìƒë“¤ì´ ì§ì ‘ í™•ì¸í•´ì•¼ í•  ê³µì‹ ë¬¸ì„œ**:
- ğŸ“˜ [Elastic Load Balancingì´ë€?](https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/what-is-load-balancing.html)
- ğŸ“— [Application Load Balancer ì‚¬ìš©ì ê°€ì´ë“œ](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/)
- ğŸ“™ [Network Load Balancer ì‚¬ìš©ì ê°€ì´ë“œ](https://docs.aws.amazon.com/elasticloadbalancing/latest/network/)
- ğŸ“™ [Gateway Load Balancer ì‚¬ìš©ì ê°€ì´ë“œ](https://docs.aws.amazon.com/elasticloadbalancing/latest/gateway/)
- ğŸ“• [ELB ìš”ê¸ˆ](https://aws.amazon.com/elasticloadbalancing/pricing/)
- ğŸ†• [ELB ìµœì‹  ì—…ë°ì´íŠ¸](https://aws.amazon.com/elasticloadbalancing/whats-new/) (2024.11 LCU Reservation ì¶œì‹œ)

---

<div align="center">

**âš–ï¸ íŠ¸ë˜í”½ ë¶„ì‚°** â€¢ **ğŸ”„ ê³ ê°€ìš©ì„±** â€¢ **ğŸ¯ Health Check**

*Elastic Load Balancingìœ¼ë¡œ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ì œê³µ*

</div>
